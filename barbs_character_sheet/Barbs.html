<div class="sheet-overall-wrapper">
    <!-- PC / NPC toggle -->
    <input class="sheet-is-npc" type="checkbox" name="attr_is_npc" value="1"><span class="sheet-is-npc-tab"></span>


    <div class="sheet-core-header sheet-padb">
        <div class="sheet-row">
            <div class="sheet-col-1-2 sheet-margin-top"><img src="https://i.imgur.com/9u8XLg7.png" alt="Barbs"></div>
            <div class="sheet-col-1-4">&nbsp;</div>
            <div class="sheet-col-1-4 sheet-small-label sheet-center">
                <input class="sheet-underlined sheet-center" type="text" name="attr_character_name">
                <br/>Character Name
            </div>
        </div>
    </div>


    <div class="sheet-player">

        <!-- Header Tabs -->
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" title="Characteristics" checked="checked" />
        <span class="sheet-tab sheet-tab1">Characteristics</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2" />
        <span class="sheet-tab sheet-tab2">Attributes</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3" />
        <span class="sheet-tab sheet-tab3">Stats</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4" />
        <span class="sheet-tab sheet-tab4">Skills</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab5" value="5" />
        <span class="sheet-tab sheet-tab5">Class Abilities</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab6" value="6" />
        <span class="sheet-tab sheet-tab6">Equipment</span>
        <input type="radio" name="attr_tab" class="sheet-tab sheet-tab7" value="7" />
        <span class="sheet-tab sheet-tab7">Inventory</span>
        <span class="sheet-spacer"></span>


        <!-- Characteristics Sheet -->
        <div class="sheet-section-characteristics">
            <h4 class="sheet-center">Appearance, Languages and Alignment</h4>
            <div class="sheet-row">
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_gender">
                    <br/>Gender
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="number" name="attr_age">
                    <br/>Age
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_height">
                    <br/>Height
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_weight">
                    <br/>Weight
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_eyes">
                    <br/>Eye Color
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_hair">
                    <br/>Hair Color
                </div>
            </div>

            <div class="sheet-row sheet-padb">
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_race">
                    <br/>Race
                </div>
                <div class="sheet-col-2-3 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_languages">
                    <br/>Known Languages
                </div>
                <div class="sheet-col-1-6 sheet-small-label sheet-center">
                    <input class="sheet-underlined sheet-center" type="text" name="attr_alignment">
                    <br/>Alignment
                </div>
            </div>


            <div class="sheet-row sheet-padb">

                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <h4 class="sheet-center">Core Stats</h4>
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-3-4 sheet-center sheet-small-label">Stat</div>
                        <div class="sheet-col-1-4 sheet-center sheet-small-label">Base Value</div>
                    </div>

                    <!-- Core stat: Health -->
                    <div class="sheet-row">
                        <div class="sheet-col-3-4 sheet-core-stat-label">Health</div>
                        <div class="sheet-col-1-4">
                            <input type="number" name="attr_overview_health" value="@{hidden_overview_health}" disabled="disabled"/>
                        </div>
                        <input type="hidden" name="attr_hidden_overview_health" value="100+10*@{VIT}"/>
                    </div>

                    <!-- Core stat: Stamina -->
                    <div class="sheet-row">
                        <div class="sheet-col-3-4 sheet-core-stat-label">Stamina</div>
                        <div class="sheet-col-1-4">
                            <input type="number" name="attr_overview_stamina" value="@{hidden_overview_stamina}" disabled="disabled" />
                        </div>
                        <input type="hidden" name="attr_hidden_overview_stamina" value="100+10*@{END}"/>
                    </div>

                    <!-- Core stat: Mana -->
                    <div class="sheet-row">
                        <div class="sheet-col-3-4 sheet-core-stat-label">Mana</div>
                        <div class="sheet-col-1-4">
                            <input type="number" name="attr_overview_mana" value="@{hidden_overview_mana}" disabled="disabled" />
                        </div>
                        <input type="hidden" name="attr_hidden_overview_mana" value="100+10*@{SPT}"/>
                    </div>

                    <!-- Core stat: Agility -->
                    <div class="sheet-row sheet-padb">
                        <div class="sheet-col-3-4 sheet-core-stat-label">Speed</div>
                        <div class="sheet-col-1-4">
                            <input type="number" name="attr_overview_speed" value="@{hidden_overview_speed}" disabled="disabled" />
                        </div>
                        <input type="hidden" name="attr_hidden_overview_speed" value="30+5*floor(@{AGI}/2)"/>
                    </div>

                    <h4 class="sheet-center">Class AP Investment</h4>
                    <div class="sheet-row">
                        <fieldset class="repeating_investment">
                            <div class="sheet-col-1-2">
                                <input class="sheet-center" type="text" name="attr_invest_name" value="@{hidden_invest_name}" disabled="disabled"/>
                            </div>
                            <div class="sheet-col-1-2">
                                <input class="sheet-center" type="number" name="attr_investment-ap" value="@{hidden_invest_ap}" disabled="disabled"/>
                            </div>

                            <input type="hidden" name="attr_hidden_invest_name" value=""/>
                            <input type="hidden" name="attr_hidden_invest_ap" value=""/>
                        </fieldset>
                    </div>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <h4 class="sheet-center">General</h4>
                    <div class="sheet-row sheet-padb sheet-center">
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Initiative" value="!barbs initiative $@{character_name}$">Initiative</button>
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_List_Effects" value="!barbs list_effects $@{character_name}$">List Effects</button>
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Death_Save" value="&{template:5eDefault}  {{title=Death Save}} {{subheader=@{character_name}}} {{rollname=Death save}} {{roll=[[1d100]]}}">Death Save</button>
                    </div>

                    <div class="sheet-row sheet-padb sheet-center">
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Take_Damage" value="!barbs dmg $@{character_name}$ physical:?{Physical|0} psychic:?{Psychic|0} fire:?{Fire|0} water:?{Water|0} earth:?{Earth|0} air:?{Air|0} ice:?{Ice|0} lightning:?{Lightning|0} light:?{Light|0} dark:?{Dark|0}">Take Damage</button>
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Condition_Resist" value="!barbs cr $@{character_name}$ ?{Condition|General|Bleeding|Blinded|Burned|Charmed|Confused|Crippled|Cursed|Decreased Stats|Fear|Frozen|Helpless|Immobilized|Knocked Down (Prone)|Knocked Up (Airborne)|Paralyzed|Petrified|Poisoned|Silenced|Sleeping|Slowed|Stunned|Taunted|Weakened}">Condition Resist</button>
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Concentration" value="!barbs concentration $@{character_name}$">Concentration</button>
                    </div>

                    <div class="sheet-row sheet-padb sheet-center">
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Short_Rest" value="!barbs rest $@{character_name}$ short">Short Rest</button>
                        <button type="roll" class="sheet-col-7-24 sheet-center sheet-initiative sheet-large-button" name="roll_Long_Rest" value="!barbs rest $@{character_name}$ long">Long Rest</button>
                    </div>

                    <h4 class="sheet-center">Level and Combat Experience</h4>
                    <div class="sheet-row sheet-center">
                        <div class="sheet-col-1-3 sheet-small-label sheet-center" title="This is automatically calculated from your individual class levels listed in the class section">
                            <input class="sheet-underlined" type="number" name="attr_level" value="@{hidden_level}" disabled="disabled">
                            <input type="hidden" name="attr_hidden_level" value="200+@{VIT}+@{END}+@{SPT}+@{RCV}+@{PER}+@{SAN}+@{AGI}+@{TGH}+@{REF}+@{RES}+@{FRT}+@{STR}+@{DEX}+@{ATN}+@{PRE}+@{APL}+@{INT}+@{WIS}+@{COM}+@{FCS}"/>
                            <br/>Overall Level
                        </div>

                        <div class="sheet-col-1-3 sheet-small-label sheet-center">
                            <input class="sheet-underlined" type="number" name="attr_xp" min="0" max="100" step="1">
                            <br/>Current Combat XP
                        </div>

                        <div class="sheet-col-1-3 sheet-small-label sheet-center">
                            <input class="sheet-underlined" type="number" name="attr_xp_next_level" value="100" disabled="disabled">
                            <br/>XP for next level
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <!-- Attributes Sheet -->
        <div class="sheet-section-attributes">

            <h4 class="sheet-center">Attributes</h4>
            <div class="sheet-row">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-23-24 sheet-small-label">Attribute</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Vitality (VIT)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_VIT" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_vitality" value="&{template:default} {{name=Vitality}} {{VIT=[[1d100+@{VIT}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Endurance (END)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_END" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_endurance" value="&{template:default} {{name=Endurance}} {{END=[[1d100+@{END}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Spirit (SPT)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_SPT" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_spirit" value="&{template:default} {{name=Spirit}} {{SPT=[[1d100+@{SPT}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Recovery (RCV)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_RCV" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_recovery" value="&{template:default} {{name=Recovery}} {{RCV=[[1d100+@{RCV}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Perseverance (PER)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_PER" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_perseverance" value="&{template:default} {{name=Perseverance}} {{PER=[[1d100+@{PER}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Sanity (SAN)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_SAN" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_sanity" value="&{template:default} {{name=Sanity}} {{SAN=[[1d100+@{SAN}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Agility (AGI)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_AGI" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_agility" value="&{template:default} {{name=Agility}} {{AGI=[[1d100+@{AGI}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Toughness (TGH)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_TGH" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_toughness" value="&{template:default} {{name=Toughness}} {{TGH=[[1d100+@{TGH}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Reflex (REF)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_REF" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_reflex" value="&{template:default} {{name=Reflex}} {{REF=[[1d100+@{REF}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Resistance (RES)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_RES" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_resistance" value="&{template:default} {{name=Resistance}} {{RES=[[1d100+@{RES}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-23-24 sheet-small-label">Attribute</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Fortitude (FRT)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_FRT" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_fortitude" value="&{template:default} {{name=Fortitude}} {{FRT=[[1d100+@{FRT}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Strength (STR)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_STR" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_strength" value="&{template:default} {{name=Strength}} {{STR=[[1d100+@{STR}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Dexterity (DEX)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_DEX" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_dexterity" value="&{template:default} {{name=Dexterity}} {{DEX=[[1d100+@{DEX}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Attunement (ATN)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ATN" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_attunement" value="&{template:default} {{name=Attunement}} {{ATN=[[1d100+@{ATN}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Precision (PRE)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_PRE" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_precision" value="&{template:default} {{name=Precision}} {{PRE=[[1d100+@{PRE}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Appeal (APL)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_APL" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_appeal" value="&{template:default} {{name=Appeal}} {{APL=[[1d100+@{APL}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Intelligence (INT)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_INT" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_intelligence" value="&{template:default} {{name=Intelligence}} {{INT=[[1d100+@{INT}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Wisdom (WIS)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_WIS" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_wisdom" value="&{template:default} {{name=Wisdom}} {{WIS=[[1d100+@{WIS}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Composure (COM)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_COM" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_composure" value="&{template:default} {{name=Composure}} {{COM=[[1d100+@{COM}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Focus (FCS)</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_FCS" min="-10" max="20" step="1" value="-10" />
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_focus" value="&{template:default} {{name=Focus}} {{FCS=[[1d100+@{FCS}]]}}"></button>
                        </div>
                        <div class="sheet-col-1-6">&nbsp;</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Stats Sheet -->
        <div class="sheet-section-stats">

            <h4 class="sheet-center">Core Stats</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Health</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_health" value="@{hidden_health}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_health" value="!barbs stat $@{character_name}$ Health"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_health" value="100+10*@{VIT}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Stamina</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_stamina" value="@{hidden_stamina}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_stamina" value="!barbs stat $@{character_name}$ Stamina"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_stamina" value="100+10*@{END}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Mana</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_mana" value="@{hidden_mana}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_mana" value="!barbs stat $@{character_name}$ Mana"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_mana" value="100+10*@{SPT}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Health Regeneration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_health_regeneration" value="@{hidden_health_regeneration}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_health_regeneration" value="!barbs stat $@{character_name}$ Health_Regeneration"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_health_regeneration" value="10+@{RCV}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Stamina Regeneration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_stamina_regeneration" value="@{hidden_stamina_regeneration}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_stamina_regeneration" value="!barbs stat $@{character_name}$ Stamina_Regeneration"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_stamina_regeneration" value="10+@{PER}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Mana Regeneration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_mana_regeneration" value="@{hidden_mana_regeneration}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_mana_regeneration" value="!barbs stat $@{character_name}$ Mana_Regeneration"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_mana_regeneration" value="10+@{SAN}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Movement Speed</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_movement_speed" value="@{hidden_movement_speed}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_movement_speed" value="!barbs stat $@{character_name}$ Movement_Speed"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_movement_speed" value="30+5*floor(@{AGI}/2)"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">AC</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ac" value="@{hidden_ac}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_ac" value="!barbs stat $@{character_name}$ AC"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ac" value="10+@{TGH}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Evasion</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_evasion" value="@{hidden_evasion}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_evasion" value="!barbs stat $@{character_name}$ Evasion"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_evasion" value="10+@{REF}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_magic_resist" value="@{hidden_magic_resist}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_magic_resist" value="!barbs stat $@{character_name}$ Magic_Resist"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_magic_resist" value="10+@{RES}"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_condition_resist" value="@{hidden_condition_resist}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_condition_resist" value="!barbs cr $@{character_name}$ ?{Condition|General|Bleeding|Blinded|Burned|Charmed|Confused|Crippled|Cursed|Decreased Stats|Fear|Frozen|Helpless|Immobilized|Knocked Down (Prone)|Knocked Up (Airborne)|Paralyzed|Petrified|Poisoned|Silenced|Sleeping|Slowed|Stunned|Taunted|Weakened}"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_condition_resist" value="10+@{FRT}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Melee Damage</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_melee_damage" value="@{hidden_melee_damage}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_melee_damage" value="!barbs stat $@{character_name}$ Melee_Damage"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_melee_damage" value="@{STR}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Ranged/Fine Damage</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ranged_fine_damage" value="@{hidden_ranged_fine_damage}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_ranged_fine_damage" value="!barbs stat $@{character_name}$ Ranged_Fine_Damage"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ranged_fine_damage" value="@{DEX}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Magic Damage</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_magic_damage" value="@{hidden_magic_damage}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_magic_damage" value="!barbs stat $@{character_name}$ Magic_Damage"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_magic_damage" value="@{ATN}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Critical Hit Chance</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_critical_hit_chance" value="@{hidden_critical_hit_chance}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_critical_hit_chance" value="!barbs stat $@{character_name}$ Critical_Hit_Chance"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_critical_hit_chance" value="10+@{PRE}"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Commands</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_commands" value="@{hidden_commands}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_commands" value="!barbs stat $@{character_name}$ Commands"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_commands" value="floor((@{APL}+10)/10)+1"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Languages</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_num_languages" value="@{hidden_num_languages}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_languages" value="!barbs stat $@{character_name}$ Languages"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_num_languages" value="floor((@{INT}+10)/3)+1"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Item Efficiency</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_item_efficiency" value="@{hidden_item_efficiency}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_item_efficiency" value="!barbs stat $@{character_name}$ Item_Efficiency"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_item_efficiency" value="(@{WIS}+10)*5"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Buff Limit</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_buff_limit" value="@{hidden_buff_limit}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_buff_limit" value="!barbs stat $@{character_name}$ Buff_Limit"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_buff_limit" value="floor((@{COM}+10)/2)"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Concentration Limit</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_concentration_limit" value="@{hidden_concentration_limit}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_concentration_limit" value="!barbs stat $@{character_name}$ Concentration_Limit"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_concentration_limit" value="floor((@{FCS}+10)/2)"/>
                </div>
            </div>

            <h4 class="sheet-center">Miscellaneous</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Initiative Bonus</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_initiative_bonus" value="@{hidden_initiative_bonus}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_Initiative" value="!barbs initiative $@{character_name}$"></button>
                        </div>
                        <div class="sheet-col-1-8">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_initiative_bonus" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Concentration Bonus</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_concentration_bonus" value="@{hidden_concentration_bonus}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_Concentration" value="!barbs concentration $@{character_name}$"></button>
                        </div>
                        <div class="sheet-col-1-8">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_concentration_bonus" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Buff Effectiveness</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_buff_effectiveness" value="@{hidden_buff_effectiveness}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_buff_effectiveness" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Enchant Effectiveness</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_enchant_effectiveness" value="@{hidden_enchant_effectiveness}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_enchant_effectiveness" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Combo Chance</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_combo_chance" value="@{hidden_combo_chance}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_combo_chance" value="0"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Crit Damage Mod</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_crit_damage_mod" value="@{hidden_crit_damage_mod}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_crit_damage_mod" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Lethality</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_lethality" value="@{hidden_lethality}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_lethality" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Minion Damage</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_minion_damage" value="@{hidden_minion_damage}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_minion_damage" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Minion Lethality</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_minion_lethality" value="@{hidden_minion_lethality}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_minion_lethality" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Lifesteal</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_lifesteal" value="@{hidden_lifesteal}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_lifesteal" value="0"/>
                </div>
            </div>

            <h4 class="sheet-center">Damage Multipliers</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">All Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_all_multiplier" value="@{hidden_all_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_all_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">All Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_all_magic_multiplier" value="@{hidden_all_magic_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_all_magic_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Physical Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_physical_multiplier" value="@{hidden_physical_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_physical_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Psychic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_psychic_multiplier" value="@{hidden_psychic_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_psychic_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Healing Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_healing_multiplier" value="@{hidden_healing_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_healing_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Fire Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_fire_multiplier" value="@{hidden_fire_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_fire_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Water Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_water_multiplier" value="@{hidden_water_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_water_multiplier" value="0"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Earth Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_earth_multiplier" value="@{hidden_earth_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_earth_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Air Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_air_multiplier" value="@{hidden_air_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_air_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Ice Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ice_multiplier" value="@{hidden_ice_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ice_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Lightning Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_lightning_multiplier" value="@{hidden_lightning_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_lightning_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Light Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_light_multiplier" value="@{hidden_light_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_light_multiplier" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Dark Magic Damage Multiplier</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_dark_multiplier" value="@{hidden_dark_multiplier}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_dark_multiplier" value="0"/>
                </div>
            </div>

            <h4 class="sheet-center">Penetration Stats</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Accuracy</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_accuracy" value="@{hidden_accuracy}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_accuracy" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">AC Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ac_pen" value="@{hidden_ac_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ac_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Psychic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_psychic_pen" value="@{hidden_psychic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_psychic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">General Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_general_magic_pen" value="@{hidden_general_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_general_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Fire Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_fire_magic_pen" value="@{hidden_fire_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_fire_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Water Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_water_magic_pen" value="@{hidden_water_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_water_magic_pen" value="0"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Earth Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_earth_magic_pen" value="@{hidden_earth_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_earth_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Air Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_air_magic_pen" value="@{hidden_air_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_air_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Ice Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ice_magic_pen" value="@{hidden_ice_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ice_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Lightning Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_lightning_magic_pen" value="@{hidden_lightning_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_lightning_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Light Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_light_magic_pen" value="@{hidden_light_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_light_magic_pen" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Dark Magic Penetration</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_dark_magic_pen" value="@{hidden_dark_magic_pen}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_dark_magic_pen" value="0"/>
                </div>
            </div>

            <h4 class="sheet-center">Damage Reduction Stats</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">General Damage Reduction</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_gdr" value="@{hidden_gdr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_gdr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">AC</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ac_dms" value="@{hidden_ac}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">General Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_mr_dms" value="@{hidden_magic_resist}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Fire Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_fire_mr" value="@{hidden_fire_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_fire_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Water Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_water_mr" value="@{hidden_water_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_water_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Earth Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_earth_mr" value="@{hidden_earth_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_earth_mr" value="0"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Air Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_air_mr" value="@{hidden_air_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_air_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Ice Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_ice_mr" value="@{hidden_ice_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_ice_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Lightning Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_lightning_mr" value="@{hidden_lightning_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_lightning_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Light Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_light_mr" value="@{hidden_light_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_light_mr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Dark Magic Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_dark_mr" value="@{hidden_dark_mr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-7-24">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_dark_mr" value="0"/>
                </div>
            </div>

            <h4 class="sheet-center">Condition Resistances</h4>
            <div class="sheet-row sheet-padb">
                <!-- left column -->
                <div class="sheet-col-1-2 sheet-padr">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">General Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_cr_cr" value="@{hidden_condition_resist}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_general_cr" value="!barbs cr $@{character_name}$ General"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Bleeding Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_bleeding_cr" value="@{hidden_bleeding_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_bleeding_cr" value="!barbs cr $@{character_name}$ Bleeding"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_bleeding_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Blinded Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_blinded_cr" value="@{hidden_blinded_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_blinded_cr" value="!barbs cr $@{character_name}$ Blinded"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_blinded_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Burned Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_burned_cr" value="@{hidden_burned_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_burned_cr" value="!barbs cr $@{character_name}$ Burned"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_burned_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Charmed Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_charmed_cr" value="@{hidden_charmed_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_charmed_cr" value="!barbs cr $@{character_name}$ Charmed"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_charmed_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Confused Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_confused_cr" value="@{hidden_confused_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_confused_cr" value="!barbs cr $@{character_name}$ Confused"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_confused_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Crippled Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_crippled_cr" value="@{hidden_crippled_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_crippled_cr" value="!barbs cr $@{character_name}$ Crippled"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_crippled_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Cursed Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_cursed_cr" value="@{hidden_cursed_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_cursed_cr" value="!barbs cr $@{character_name}$ Cursed"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_cursed_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Decreased Stats Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_decreased_stats_cr" value="@{hidden_decreased_stats_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_decreased_stats_cr" value="!barbs cr $@{character_name}$ Decreased Stats"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_decreased_stats_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Fear Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_fear_cr" value="@{hidden_fear_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_fear_cr" value="!barbs cr $@{character_name}$ Fear"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_fear_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Frozen Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_frozen_cr" value="@{hidden_frozen_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_frozen_cr" value="!barbs cr $@{character_name}$ Frozen"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_frozen_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Helpless Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_helpless_cr" value="@{hidden_helpless_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_helpless_cr" value="!barbs cr $@{character_name}$ Helpless"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_helpless_cr" value="0"/>
                </div>

                <!-- right column -->
                <div class="sheet-col-1-2">
                    <div class="sheet-row sheet-sub-header">
                        <div class="sheet-col-1-24 sheet-center sheet-small-label">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-small-label">Stat</div>
                        <div class="sheet-col-1-6 sheet-center sheet-small-label">Value</div>
                        <div class="sheet-col-7-24 sheet-center sheet-small-label">&nbsp;</div>
                    </div>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Immobilized Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_immobilized_cr" value="@{hidden_immobilized_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_immobilized_cr" value="!barbs cr $@{character_name}$ Immobilized"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_immobilized_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Knocked Down (Prone) Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_knocked_down_prone_cr" value="@{hidden_knocked_down_prone_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_knocked_down_prone_cr" value="!barbs cr $@{character_name}$ Knocked Down (Prone)"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_knocked_down_prone_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Knocked Up (Airborne) Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_knocked_up_airborne_cr" value="@{hidden_knocked_up_airborne_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_knocked_up_airborne_cr" value="!barbs cr $@{character_name}$ Knocked Up (Airborne)"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_knocked_up_airborne_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Paralyzed Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_paralyzed_cr" value="@{hidden_paralyzed_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_paralyzed_cr" value="!barbs cr $@{character_name}$ Paralyzed"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_paralyzed_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Petrified Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_petrified_cr" value="@{hidden_petrified_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_petrified_cr" value="!barbs cr $@{character_name}$ Petrified"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_petrified_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Poisoned Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_poisoned_cr" value="@{hidden_poisoned_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_poisoned_cr" value="!barbs cr $@{character_name}$ Poisoned"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_poisoned_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Silenced Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_silenced_cr" value="@{hidden_silenced_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_silenced_cr" value="!barbs cr $@{character_name}$ Silenced"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_silenced_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Sleeping Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_sleeping_cr" value="@{hidden_sleeping_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_sleeping_cr" value="!barbs cr $@{character_name}$ Sleeping"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_sleeping_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Slowed Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_slowed_cr" value="@{hidden_slowed_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_slowed_cr" value="!barbs cr $@{character_name}$ Slowed"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_slowed_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Stunned Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_stunned_cr" value="@{hidden_stunned_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_stunned_cr" value="!barbs cr $@{character_name}$ Stunned"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_stunned_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Taunted Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_taunted_cr" value="@{hidden_taunted_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_taunted_cr" value="!barbs cr $@{character_name}$ Taunted"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_taunted_cr" value="0"/>

                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-2 sheet-skill-name">Weakened Condition Resist</div>
                        <div class="sheet-col-1-6">
                            <input type="number" name="attr_weakened_cr" value="@{hidden_weakened_cr}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24 sheet-align-center">&nbsp;</div>
                        <div class="sheet-col-1-12">
                            <button class="sheet-skill-roll" type="roll" name="roll_weakened_cr" value="!barbs cr $@{character_name}$ Weakened"></button>
                        </div>
                        <div class="sheet-col-1-8 sheet-align-center">&nbsp;</div>
                    </div>
                    <input type="hidden" name="attr_hidden_weakened_cr" value="0"/>
                </div>
            </div>
        </div>


        <!-- Skills Sheet -->
        <div class="sheet-section-skills">

            <h4 class="sheet-center">Skills</h4>
            <div class="sheet-row">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-7-12 sheet-center sheet-small-label">Skill</div>
                    <div class="sheet-col-1-8 sheet-center sheet-small-label">Points</div>
                    <div class="sheet-col-1-8 sheet-center sheet-small-label">Rank</div>
                    <div class="sheet-col-1-8 sheet-center sheet-small-label">Base Bonus</div>
                    <div class="sheet-col-1-24 sheet-center sheet-small-label">Roll</div>
                </div>

                <fieldset class="repeating_skills">
                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-7-12">
                            <input type="text" name="attr_skill_name"/>
                        </div>
                        <div class="sheet-col-1-8">
                            <input type="number" name="attr_skill_points" value="0" min="0" max="15"/>
                        </div>
                        <div class="sheet-col-1-8">
                            <input type="text" class="sheet-center" name="attr_skill_rank" value="@{hidden_rank}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-8">
                            <input type="number" class="sheet-center" name="attr_skill_bonus" value="@{hidden_bonus}" disabled="disabled"/>
                        </div>
                        <div class="sheet-col-1-24">
                            <button class="sheet-skill-roll" type="roll" name="roll_skill" value="!barbs skill $@{character_name}$ @{skill_name} @{skill_points}"></button>
                        </div>

                        <input type="hidden" name="attr_hidden_rank" value=""/>
                        <input type="hidden" name="attr_hidden_bonus" value=""/>
                    </div>
                </fieldset>

                <button type="action" name="act_sort_skills">Alphabetize Skills</button>
            </div>
        </div>


        <!-- Class abilities sheet -->
        <div class="sheet-section-classes-abilities">

            <h4 class="sheet-center">Class Abilities</h4>
            <div class="sheet-row">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-3 sheet-center sheet-small-label">Class</div>
                    <div class="sheet-col-1-2 sheet-center sheet-small-label">Ability</div>
                    <div class="sheet-col-1-8 sheet-center sheet-small-label">Tier</div>
                    <div class="sheet-col-1-24 sheet-center sheet-small-label">Use</div>
                </div>

                <fieldset class="repeating_abilities">
                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-3">
                            <input style="font-weight: bolder;" type="text" placeholder="class name" name="attr_class_name"/>
                        </div>
                        <div class="sheet-col-1-2 sheet-bold">
                            <input style="font-weight: bolder;" type="text" placeholder="ability name" name="attr_ability_name"/>
                        </div>
                        <div class="sheet-col-1-8">
                            <input style="font-weight: bolder;" type="number" class="sheet-center" name="attr_ability_tier" value="" min="0" max="4"/>
                        </div>
                        <div class="sheet-col-1-24">
                            <button class="sheet-skill-roll" type="roll" name="roll_class_ability" value="!barbs ability $@{character_name}$ @{class_name};@{ability_name};@{ability_options}"></button>
                        </div>
                    </div>
                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-23-24">
                            <input type="text" placeholder="&nbsp;&nbsp;&nbsp;&nbsp;ability parameters and options" name="attr_ability_options"/>
                        </div>
                        <div class="sheet-col-1-24">&nbsp;</div>
                    </div>

                    <!-- add some separation between abilities -->
                    <div class="sheet-row sheet-skill-row">
                        <div class="sheet-col-1-2">&nbsp;</div>
                        <div class="sheet-col-1-2">&nbsp;</div>
                    </div>
                </fieldset>
            </div>
        </div>


        <!-- Equipment sheet -->
        <div class="sheet-section-equipment">
            <h4 class="sheet-center">Equipment</h4>
            <div class="sheet-row">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-6 sheet-center sheet-small-label">Slot</div>
                    <div class="sheet-col-19-24 sheet-center sheet-small-label">Item Name</div>
                    <div class="sheet-col-1-24 sheet-center sheet-small-label">Use</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Main Hand" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_main_hand" value=""/>
                    </div>
                    <div class="sheet-col-1-24">
                        <button class="sheet-skill-roll" type="roll" name="roll_item" value="!barbs item $@{character_name}$ main_hand @{main_hand}|@{main_hand_options}"></button>
                    </div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">&nbsp;</div>
                    <div class="sheet-col-19-24">
                        <input type="text" placeholder="&nbsp;&nbsp;&nbsp;&nbsp;item parameters and options" name="attr_main_hand_options"/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Offhand" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_offhand" value=""/>
                    </div>
                    <div class="sheet-col-1-24">
                        <button class="sheet-skill-roll" type="roll" name="roll_item" value="!barbs item $@{character_name}$ offhand @{offhand}|@{offhand_options}"></button>
                    </div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">&nbsp;</div>
                    <div class="sheet-col-19-24">
                        <input type="text" placeholder="&nbsp;&nbsp;&nbsp;&nbsp;item parameters and options" name="attr_offhand_options"/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Head" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_head" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Body" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_body" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Hands" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_hands" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Feet" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_feet" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Neck" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_neck" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Left Ring" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_left_ring" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Right Ring" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_right_ring" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Belt" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_belt" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>

                <div class="sheet-row sheet-skill-row">
                    <div class="sheet-col-1-6">
                        <input type="text" class="sheet-center sheet-bold" value="Miscellaneous" disabled="disabled"/>
                    </div>
                    <div class="sheet-col-19-24">
                        <input type="text" name="attr_miscellaneous" value=""/>
                    </div>
                    <div class="sheet-col-1-24">&nbsp;</div>
                </div>
            </div>

            <div class="sheet-row">
                <div class="sheet-col-1-6">&nbsp;</div>
                <button type="roll" class="sheet-col-2-3 sheet-center sheet-large-thin-button" name="roll_Check_Items" value="!barbs check_items $@{character_name}$">Check Items</button>
            </div>
            <br>

            <hr/>
            <h4 class="sheet-center">Extra Equipment</h4>
            <textarea name="attr_extra_items"></textarea>
        </div>


        <!-- Inventory sheet -->
        <div class="sheet-section-inventory">

            <h4 class="sheet-center">Coin Carried <span class="sheet-pictos">h</span></h4>
            <div class="sheet-row">
                <div class="sheet-col-1-2" title="Gold Pieces">
                    <input class="sheet-center" type="text" value="Gold Pieces" disabled="disabled"/>
                </div>
                <div class="sheet-col-1-2" title="Gold Pieces">
                    <input class="sheet-center" type="text" name="attr_gp">
                </div>
            </div>

            <h4 class="sheet-center">Inventory</h4>
            <input type="radio" name="attr_inventorytab" class="sheet-inventorytab sheet-inventorytab1" value="1" title="Page 1" checked="checked" />
            <span class="sheet-inventorytab sheet-inventorytab1">Page 1</span>
            <input type="radio" name="attr_inventorytab" class="sheet-inventorytab sheet-inventorytab2" value="2" title="Page 2" />
            <span class="sheet-inventorytab sheet-inventorytab2">Page 2</span>
            <input type="radio" name="attr_inventorytab" class="sheet-inventorytab sheet-inventorytab3" value="3" title="Page 3" />
            <span class="sheet-inventorytab sheet-inventorytab3">Page 3</span>
            <input type="radio" name="attr_inventorytab" class="sheet-inventorytab sheet-inventorytab4" value="4" title="Page 4" />
            <span class="sheet-inventorytab sheet-inventorytab4">Page 4</span>
            <input type="radio" name="attr_inventorytab" class="sheet-inventorytab sheet-inventorytab99" value="99" title="Show All" />
            <span class="sheet-inventorytab sheet-inventorytab99">Show All</span>
            <span class="sheet-spacer"></span>

            <div class="sheet-inventory-page1">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Row #</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Carried?</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Qty</div>
                    <div class="sheet-col-4-15 sheet-center sheet-small-label">Name</div>
                    <div class="sheet-col-2-15 sheet-center sheet-small-label">Weight</div>
                    <div class="sheet-col-6-15 sheet-center sheet-small-label">Description</div>
                </div>

                <div class="sheet-inventory-row1">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">1</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried1" value="@{inventoryweight1}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty1" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname1">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight1" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription1">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row2">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">2</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried2" value="@{inventoryweight2}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty2" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname2">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight2" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription2">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row3">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">3</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried3" value="@{inventoryweight3}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty3" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname3">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight3" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription3">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row4">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">4</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried4" value="@{inventoryweight4}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty4" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname4">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight4" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription4">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row5">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">5</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried5" value="@{inventoryweight5}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty5" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname5">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight5" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription5">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row6">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">6</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried6" value="@{inventoryweight6}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty6" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname6">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight6" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription6">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row7">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">7</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried7" value="@{inventoryweight7}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty7" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname7">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight7" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription7">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row8">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">8</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried8" value="@{inventoryweight8}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty8" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname8">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight8" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription8">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row9">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">9</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried9" value="@{inventoryweight9}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty9" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname9">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight9" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription9">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row10">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">10</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried10" value="@{inventoryweight10}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty10" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname10">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight10" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription10">
                        </div>
                    </div>
                </div>
            </div>

            <div class="sheet-inventory-page2">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Row #</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Carried?</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Qty</div>
                    <div class="sheet-col-4-15 sheet-center sheet-small-label">Name</div>
                    <div class="sheet-col-2-15 sheet-center sheet-small-label">Weight</div>
                    <div class="sheet-col-6-15 sheet-center sheet-small-label">Description</div>
                </div>

                <div class="sheet-inventory-row11">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">11</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried11" value="@{inventoryweight11}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty11" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname11">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight11" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription11">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row12">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">12</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried12" value="@{inventoryweight12}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty12" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname12">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight12" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription12">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row13">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">13</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried13" value="@{inventoryweight13}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty13" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname13">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight13" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription13">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row14">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">14</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried14" value="@{inventoryweight14}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty14" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname14">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight14" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription14">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row15">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">15</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried15" value="@{inventoryweight15}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty15" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname15">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight15" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription15">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row16">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">16</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried16" value="@{inventoryweight16}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty16" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname16">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight16" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription16">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row17">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">17</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried17" value="@{inventoryweight17}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty17" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname17">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight17" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription17">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row18">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">18</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried18" value="@{inventoryweight18}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty18" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname18">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight18" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription18">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row19">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">19</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried19" value="@{inventoryweight19}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty19" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname19">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight19" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription19">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row20">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">20</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried20" value="@{inventoryweight20}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty20" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname20">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight20" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription20">
                        </div>
                    </div>
                </div>
            </div>

            <div class="sheet-inventory-page3">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Row #</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Carried?</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Qty</div>
                    <div class="sheet-col-4-15 sheet-center sheet-small-label">Name</div>
                    <div class="sheet-col-2-15 sheet-center sheet-small-label">Weight</div>
                    <div class="sheet-col-6-15 sheet-center sheet-small-label">Description</div>
                </div>

                <div class="sheet-inventory-row21">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">21</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried21" value="@{inventoryweight21}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty21" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname21">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight21" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription21">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row22">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">22</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried22" value="@{inventoryweight22}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty22" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname22">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight22" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription22">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row23">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">23</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried23" value="@{inventoryweight23}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty23" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname23">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight23" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription23">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row24">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">24</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried24" value="@{inventoryweight24}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty24" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname24">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight24" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription24">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row25">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">25</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried25" value="@{inventoryweight25}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty25" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname25">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight25" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription25">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row26">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">26</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried26" value="@{inventoryweight26}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty26" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname26">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight26" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription26">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row27">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">27</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried27" value="@{inventoryweight27}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty27" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname27">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight27" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription27">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row28">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">28</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried28" value="@{inventoryweight28}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty28" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname28">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight28" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription28">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row29">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">29</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried29" value="@{inventoryweight29}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty29" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname29">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight29" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription29">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row30">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">30</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried30" value="@{inventoryweight30}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty30" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname30">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight30" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription30">
                        </div>
                    </div>
                </div>
            </div>

            <div class="sheet-inventory-page4">
                <div class="sheet-row sheet-sub-header">
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Row #</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Carried?</div>
                    <div class="sheet-col-1-15 sheet-center sheet-small-label">Qty</div>
                    <div class="sheet-col-4-15 sheet-center sheet-small-label">Name</div>
                    <div class="sheet-col-2-15 sheet-center sheet-small-label">Weight</div>
                    <div class="sheet-col-6-15 sheet-center sheet-small-label">Description</div>
                </div>

                <div class="sheet-inventory-row31">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">31</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried31" value="@{inventoryweight31}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty31" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname31">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight31" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription31">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row32">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">32</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried32" value="@{inventoryweight32}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty32" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname32">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight32" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription32">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row33">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">33</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried33" value="@{inventoryweight33}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty33" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname33">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight33" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription33">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row34">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">34</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried34" value="@{inventoryweight34}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty34" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname34">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight34" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription34">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row35">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">35</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried35" value="@{inventoryweight35}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty35" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname35">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight35" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription35">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row36">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">36</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried36" value="@{inventoryweight36}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty36" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname36">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight36" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription36">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row37">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">37</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried37" value="@{inventoryweight37}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty37" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname37">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight37" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription37">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row38">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">38</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried38" value="@{inventoryweight38}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty38" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname38">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight38" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription38">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row39">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">39</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried39" value="@{inventoryweight39}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty39" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname39">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight39" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription39">
                        </div>
                    </div>
                </div>
                <div class="sheet-inventory-row40">
                    <div class="sheet-row sheet-grey-row">
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-inventory-row-number">40</div>
                        <div class="sheet-col-1-15 sheet-vert-middle sheet-checkbox-row">
                            <input type="checkbox" name="attr_inventorycarried40" value="@{inventoryweight40}" checked="checked" />
                        </div>
                        <div class="sheet-col-1-15">
                            <input type="number" name="attr_inventoryqty40" value="1" min="0" step="1">
                        </div>
                        <div class="sheet-col-4-15">
                            <input type="text" name="attr_inventoryname40">
                        </div>
                        <div class="sheet-col-2-15">
                            <input type="number" name="attr_inventoryweight40" value="0" step="0.01">
                        </div>
                        <div class="sheet-col-6-15">
                            <input type="text" name="attr_inventorydescription40">
                        </div>
                    </div>
                </div>
            </div>

            <input type="hidden" name="attr_inventory_weight_calc" value="(@{inventorycarried1} + (((@{inventoryqty1} - 1) * @{inventorycarried1}) * @{weight_unit_setting}) + @{inventorycarried2} + (((@{inventoryqty2} - 1) * @{inventorycarried2}) * @{weight_unit_setting}) + @{inventorycarried3} + (((@{inventoryqty3} - 1) * @{inventorycarried3}) * @{weight_unit_setting}) + @{inventorycarried4} + (((@{inventoryqty4} - 1) * @{inventorycarried4}) * @{weight_unit_setting}) + @{inventorycarried5} + (((@{inventoryqty5} - 1) * @{inventorycarried5}) * @{weight_unit_setting}) + @{inventorycarried6} + (((@{inventoryqty6} - 1) * @{inventorycarried6}) * @{weight_unit_setting}) + @{inventorycarried7} + (((@{inventoryqty7} - 1) * @{inventorycarried7}) * @{weight_unit_setting}) + @{inventorycarried8} + (((@{inventoryqty8} - 1) * @{inventorycarried8}) * @{weight_unit_setting}) + @{inventorycarried9} + (((@{inventoryqty9} - 1) * @{inventorycarried9}) * @{weight_unit_setting}) + @{inventorycarried10} + (((@{inventoryqty10} - 1) * @{inventorycarried10}) * @{weight_unit_setting}) + @{inventorycarried11} + (((@{inventoryqty11} - 1) * @{inventorycarried11}) * @{weight_unit_setting}) + @{inventorycarried12} + (((@{inventoryqty12} - 1) * @{inventorycarried12}) * @{weight_unit_setting}) + @{inventorycarried13} + (((@{inventoryqty13} - 1) * @{inventorycarried13}) * @{weight_unit_setting}) + @{inventorycarried14} + (((@{inventoryqty14} - 1) * @{inventorycarried14}) * @{weight_unit_setting}) + @{inventorycarried15} + (((@{inventoryqty15} - 1) * @{inventorycarried15}) * @{weight_unit_setting}) + @{inventorycarried16} + (((@{inventoryqty16} - 1) * @{inventorycarried16}) * @{weight_unit_setting}) + @{inventorycarried17} + (((@{inventoryqty17} - 1) * @{inventorycarried17}) * @{weight_unit_setting}) + @{inventorycarried18} + (((@{inventoryqty18} - 1) * @{inventorycarried18}) * @{weight_unit_setting}) + @{inventorycarried19} + (((@{inventoryqty19} - 1) * @{inventorycarried19}) * @{weight_unit_setting}) + @{inventorycarried20} + (((@{inventoryqty20} - 1) * @{inventorycarried20}) * @{weight_unit_setting}) + @{inventorycarried21} + (((@{inventoryqty21} - 1) * @{inventorycarried21}) * @{weight_unit_setting}) + @{inventorycarried22} + (((@{inventoryqty22} - 1) * @{inventorycarried22}) * @{weight_unit_setting}) + @{inventorycarried23} + (((@{inventoryqty23} - 1) * @{inventorycarried23}) * @{weight_unit_setting}) + @{inventorycarried24} + (((@{inventoryqty24} - 1) * @{inventorycarried24}) * @{weight_unit_setting}) + @{inventorycarried25} + (((@{inventoryqty25} - 1) * @{inventorycarried25}) * @{weight_unit_setting}) + @{inventorycarried26} + (((@{inventoryqty26} - 1) * @{inventorycarried26}) * @{weight_unit_setting}) + @{inventorycarried27} + (((@{inventoryqty27} - 1) * @{inventorycarried27}) * @{weight_unit_setting}) + @{inventorycarried28} + (((@{inventoryqty28} - 1) * @{inventorycarried28}) * @{weight_unit_setting}) + @{inventorycarried29} + (((@{inventoryqty29} - 1) * @{inventorycarried29}) * @{weight_unit_setting}) + @{inventorycarried30} + (((@{inventoryqty30} - 1) * @{inventorycarried30}) * @{weight_unit_setting}) + @{inventorycarried31} + (((@{inventoryqty31} - 1) * @{inventorycarried31}) * @{weight_unit_setting}) + @{inventorycarried32} + (((@{inventoryqty32} - 1) * @{inventorycarried32}) * @{weight_unit_setting}) + @{inventorycarried33} + (((@{inventoryqty33} - 1) * @{inventorycarried33}) * @{weight_unit_setting}) + @{inventorycarried34} + (((@{inventoryqty34} - 1) * @{inventorycarried34}) * @{weight_unit_setting}) + @{inventorycarried35} + (((@{inventoryqty35} - 1) * @{inventorycarried35}) * @{weight_unit_setting}) + @{inventorycarried36} + (((@{inventoryqty36} - 1) * @{inventorycarried36}) * @{weight_unit_setting}) + @{inventorycarried37} + (((@{inventoryqty37} - 1) * @{inventorycarried37}) * @{weight_unit_setting}) + @{inventorycarried38} + (((@{inventoryqty38} - 1) * @{inventorycarried38}) * @{weight_unit_setting}) + @{inventorycarried39} + (((@{inventoryqty39} - 1) * @{inventorycarried39}) * @{weight_unit_setting}) + @{inventorycarried40} + (((@{inventoryqty40} - 1) * @{inventorycarried40}) * @{weight_unit_setting}))" />

            <hr/>
            <h4 class="sheet-center">Treasure/Loot/Inventory Notes <span class="sheet-pictos">W</span></h4>
            <textarea name="attr_notes"></textarea>
            <hr/>
        </div>

    </div>


    <!-- Updates skill ranks and bonuses as skills change -->
    <script type="text/worker">

        // This dictionary is auto-generated by running parse.py. The contents of the resulting
        // skills_to_attributes.json file can be copy-pasted here.
        const skill_to_attribute_map = {"Alchemy: Augmentation": "INT", "Alchemy: Constructs": "INT", "Alchemy: Organics": "INT", "Alchemy: Transformation": "INT", "Armor Mastery: Cloth": "RES", "Armor Mastery: Heavy": "TGH", "Armor Mastery: Light": "REF", "Armor Mastery: Shields": "TGH", "Artistry: Acting": "APL", "Artistry: Dancing": "APL", "Artistry: Illustration": "APL", "Artistry: Literature": "APL", "Artistry: Music": "APL", "Artistry: Sculpture": "APL", "Athletics: Balance": "DEX", "Athletics: Climbing": "AGI", "Athletics: Flexibility": "DEX", "Athletics: Force": "STR", "Athletics: Movement": "AGI", "Athletics: Pain Tolerance": "COM", "Beast Mastery: Battle Pet": "WIS", "Beast Mastery: Riding": "AGI", "Beast Mastery: Taming": "WIS", "Combat: Blocking": "TGH", "Combat: Dodging": "REF", "Combat: Grappling": "AGI", "Combat: Trapping": "FRT", "Crafting: Armorsmithing": "TGH", "Crafting: Artificing": "RES", "Crafting: Cooking": "APL", "Crafting: Enchanting": "RES", "Crafting: Fine Weapons": "REF", "Crafting: Forgery": "PRE", "Crafting: Leatherworking": "REF", "Crafting: Jewelry": "FRT", "Crafting: Heavy Weapons": "TGH", "Crafting: Poisons": "FRT", "Crafting: Potions": "FRT", "Crafting: Ranged Weapons": "REF", "Crafting: Shortblades": "PRE", "Crafting: Tailoring": "RES", "Element Mastery: Air": "AGI", "Element Mastery: Dark": "FRT", "Element Mastery: Earth": "RES", "Element Mastery: Fire": "ATN", "Element Mastery: Ice": "FRT", "Element Mastery: Light": "FCS", "Element Mastery: Lightning": "ATN", "Element Mastery: Water": "FCS", "Gathering: Forestry": "TGH", "Gathering: Harvest": "AGI", "Gathering: Herbology": "RES", "Gathering: Hunting": "REF", "Gathering: Mining": "TGH", "Gathering: Skinning": "REF", "Interaction: Deception": "APL", "Interaction: Intent": "WIS", "Interaction: Intimidation": "COM", "Interaction: Leadership": "COM", "Interaction: Persuasion": "APL", "Interaction: Seduction": "APL", "Item Use: Appraisal": "WIS", "Item Use: Construction": "STR", "Item Use: First Aid": "FRT", "Item Use: Literacy": "INT", "Item Use: Ropes": "WIS", "Item Use: Tinkering": "WIS", "Item Use: Traps": "COM", "Knowledge: Arcana": "INT", "Knowledge: Culture": "INT", "Knowledge: History": "INT", "Knowledge: Nature": "INT", "Knowledge: Religion": "INT", "Magic: Buffs": "FCS", "Magic: Conditions": "ATN", "Magic: Conjuration": "FCS", "Magic: Control": "ATN", "Magic: Defensive": "RES", "Magic: Destruction": "ATN", "Magic: Divination": "ATN", "Magic: Enchantment": "FCS", "Magic: Illusions": "FCS", "Magic: Mana Channeling": "COM", "Magic: Restoration": "ATN", "Magic: Summoning": "FCS", "Magic: Transmutation": "FCS", "Magic: Utility": "ATN", "Observation: Listen": "WIS", "Observation: Search": "WIS", "Observation: Tracking": "WIS", "Psionics: Defensive": "COM", "Psionics: Offensive": "COM", "Psionics: Utility": "COM", "Stealth: Disguise": "PRE", "Stealth: Lockpicking": "PRE", "Stealth: Sleight of Hand": "PRE", "Stealth: Sneak": "PRE", "Stealth: Steal": "PRE", "Transportation: Air Vehicles": "COM", "Transportation: Land Vehicles": "AGI", "Transportation: Sea Vehicles": "FCS", "Weapon Mastery: Axes": "STR", "Weapon Mastery: Blunt": "STR", "Weapon Mastery: Bows": "DEX", "Weapon Mastery: Bullets": "DEX", "Weapon Mastery: Crossbows": "DEX", "Weapon Mastery: Fine": "DEX", "Weapon Mastery: Improvised Weapons": "WIS", "Weapon Mastery: Heavy Thrown Weapons": "STR", "Weapon Mastery: Light Thrown Weapons": "DEX", "Weapon Mastery: Longblades": "STR", "Weapon Mastery: Polearms": "STR", "Weapon Mastery: Shields": "STR", "Weapon Mastery: Shortblades": "PRE", "Weapon Mastery: Unarmed": "DEX"};

        const ranks = ['Untrained', 'F', 'E', 'D', 'C', 'B', 'A', '9', '8', '7', '6', '5', '4', '3', '2', '1'];
        const item_attrs = ['main_hand', 'offhand', 'head', 'body', 'hands', 'feet', 'neck', 'left_ring', 'right_ring', 'belt', 'miscellaneous'];

        String.prototype.format = function() {
            let a = this;
            for (let i = 0; i < arguments.length; i++) {
                a = a.replace('%s', arguments[i]);
            }
            return a
        };

        function organize_items(items) {
            const revised = [];

            for (let i = 0; i < item_attrs.length; i++) {
                if (!(item_attrs[i] in items)) {
                    continue;
                }

                let item = items[item_attrs[i]];
                if (item === null || item === '') {
                    continue;
                }

                revised.push(item);
            }

            return revised;
        }

        function do_update(skill_name, value, items) {
            value = Math.min(value, ranks.length - 1);
            value = Math.max(0, value);

            const bonus = 5 * value;
            const rank = ranks[value];

            if (!(skill_name in skill_to_attribute_map)) {
                console.log('error, unknown skill ' + skill_name);
                return;
            }

            const attr = skill_to_attribute_map[skill_name];
            let bonus_string = '%s+@{%s}'.format(bonus.toString(), attr);

            // Check items for bonuses to this skill
            for (let i = 0; i < items.length; i++) {
                const item = items[i];

                const parts = item.split(';');
                for (let j = 0; j < parts.length; j++) {
                    const pieces = parts[j].split(':');
                    if (pieces.length !== 3) {
                        continue;
                    }

                    const potential_bonus = pieces[2].trim();
                    if (Number.isNaN(parseInt(potential_bonus, 10))) {
                        continue;
                    }

                    const potential_skill = pieces.slice(0, 2).join(':').trim();
                    if (skill_name.toLowerCase() === potential_skill.toLowerCase()) {
                        bonus_string = '%s+%s'.format(bonus_string, potential_bonus.toString());
                    }
                }
            }

            setAttrs({
                'repeating_skills_hidden_rank': rank,
                'repeating_skills_hidden_bonus': bonus_string
            });
        }

        on("change:repeating_skills:skill_points", function(event) {
            let value = parseInt(event.newValue, 10);

            getAttrs(['repeating_skills_skill_name'], function(values) {
                const skill_name = values.repeating_skills_skill_name;

                getAttrs(item_attrs, function(items) {
                    items = organize_items(items);
                    do_update(skill_name, value, items);
                });
            });
        });

        on("change:repeating_skills:skill_name", function(event) {
            const skill_name = event.newValue;

            getAttrs(['repeating_skills_skill_points'], function(values) {
                let value = parseInt(values.repeating_skills_skill_points, 10);

                getAttrs(item_attrs, function(items) {
                    items = organize_items(items);
                    do_update(skill_name, value, items);
                });
            });
        });


    </script>


    <!-- Enable + and - logic when adjusting gold value -->
    <script type="text/worker">
        on('change:gp', function(eventInfo) {
            let new_value = eventInfo.newValue;
            if (new_value.startsWith('-') || new_value.startsWith('+')) {
                new_value = parseInt(eventInfo.previousValue, 10) + parseInt(eventInfo.newValue, 10);
            }
            if (Number.isNaN(new_value)) {
                new_value = eventInfo.previousValue;
            }

            setAttrs({gp: new_value});
        });
    </script>


    <!-- Updates stats and skills as items change -->
    <script type="text/worker">

        // This dictionary is auto-generated by running parse.py. The contents of the resulting
        // skills_to_attributes.json file can be copy-pasted here.
        const skill_to_attribute_map = {"alchemy: augmentation": "INT", "alchemy: constructs": "INT", "alchemy: organics": "INT", "alchemy: transformation": "INT", "armor mastery: cloth": "RES", "armor mastery: heavy": "TGH", "armor mastery: light": "REF", "armor mastery: shields": "TGH", "artistry: acting": "APL", "artistry: dancing": "APL", "artistry: illustration": "APL", "artistry: literature": "APL", "artistry: music": "APL", "artistry: sculpture": "APL", "athletics: balance": "DEX", "athletics: climbing": "AGI", "athletics: flexibility": "DEX", "athletics: force": "STR", "athletics: movement": "AGI", "athletics: pain tolerance": "COM", "beast mastery: battle pet": "WIS", "beast mastery: riding": "AGI", "beast mastery: taming": "WIS", "combat: blocking": "TGH", "combat: dodging": "REF", "combat: grappling": "AGI", "combat: trapping": "FRT", "crafting: armorsmithing": "TGH", "crafting: artificing": "RES", "crafting: cooking": "APL", "crafting: enchanting": "RES", "crafting: fine weapons": "REF", "crafting: forgery": "PRE", "crafting: heavy weapons": "TGH", "crafting: jewelry": "FRT", "crafting: leatherworking": "REF", "crafting: poisons": "FRT", "crafting: potions": "FRT", "crafting: ranged weapons": "REF", "crafting: shortblades": "PRE", "crafting: tailoring": "RES", "element mastery: air": "AGI", "element mastery: dark": "FRT", "element mastery: earth": "RES", "element mastery: fire": "ATN", "element mastery: ice": "FRT", "element mastery: light": "FCS", "element mastery: lightning": "ATN", "element mastery: water": "FCS", "gathering: forestry": "TGH", "gathering: harvest": "AGI", "gathering: herbology": "RES", "gathering: hunting": "REF", "gathering: mining": "TGH", "gathering: skinning": "REF", "interaction: deception": "APL", "interaction: intent": "WIS", "interaction: intimidation": "COM", "interaction: leadership": "COM", "interaction: persuasion": "APL", "interaction: seduction": "APL", "item use: appraisal": "WIS", "item use: construction": "STR", "item use: first aid": "FRT", "item use: literacy": "INT", "item use: ropes": "WIS", "item use: tinkering": "WIS", "item use: traps": "COM", "knowledge: arcana": "INT", "knowledge: culture": "INT", "knowledge: history": "INT", "knowledge: nature": "INT", "knowledge: religion": "INT", "magic: buffs": "FCS", "magic: conditions": "ATN", "magic: conjuration": "FCS", "magic: control": "ATN", "magic: defensive": "RES", "magic: destruction": "ATN", "magic: divination": "ATN", "magic: enchantment": "FCS", "magic: illusions": "FCS", "magic: mana channeling": "COM", "magic: restoration": "ATN", "magic: summoning": "FCS", "magic: transmutation": "FCS", "magic: utility": "ATN", "observation: listen": "WIS", "observation: search": "WIS", "observation: tracking": "WIS", "psionics: defensive": "COM", "psionics: offensive": "COM", "psionics: utility": "COM", "stealth: disguise": "PRE", "stealth: lockpicking": "PRE", "stealth: sleight of hand": "PRE", "stealth: sneak": "PRE", "stealth: steal": "PRE", "transportation: air vehicles": "COM", "transportation: land vehicles": "AGI", "transportation: sea vehicles": "FCS", "weapon mastery: axes": "STR", "weapon mastery: blunt": "STR", "weapon mastery: bows": "DEX", "weapon mastery: bullets": "DEX", "weapon mastery: crossbows": "DEX", "weapon mastery: fine": "DEX", "weapon mastery: heavy thrown weapons": "STR", "weapon mastery: improvised weapons": "WIS", "weapon mastery: light thrown weapons": "DEX", "weapon mastery: longblades": "STR", "weapon mastery: polearms": "STR", "weapon mastery: shields": "STR", "weapon mastery: shortblades": "PRE", "weapon mastery: unarmed": "DEX"};

        const ranks = ['Untrained', 'F', 'E', 'D', 'C', 'B', 'A', '9', '8', '7', '6', '5', '4', '3', '2', '1'];
        const item_attrs = ['main_hand', 'offhand', 'head', 'body', 'hands', 'feet', 'neck', 'left_ring', 'right_ring', 'belt', 'miscellaneous'];
        const damage_multiplier_types = ['all', 'all_magic', 'physical', 'psychic', 'healing', 'fire', 'water', 'earth', 'air', 'ice', 'lightning', 'light', 'dark'];
        const stat_keywords = [
            // Core stats
            {'attr': 'health', 'key': 'health', 'equation': '100+10*@{VIT}'},
            {'attr': 'stamina', 'key': 'stamina', 'equation': '100+10*@{END}'},
            {'attr': 'mana', 'key': 'mana', 'equation': '100+10*@{SPT}'},
            {'attr': 'health_regeneration', 'key': 'health regeneration', 'equation': '10+@{RCV}'},
            {'attr': 'stamina_regeneration', 'key': 'stamina regeneration', 'equation': '10+@{PER}'},
            {'attr': 'mana_regeneration', 'key': 'mana regeneration', 'equation': '10+@{SAN}'},
            {'attr': 'movement_speed', 'key': 'movement speed', 'equation': '30+5*floor(@{AGI}/2)'},
            {'attr': 'movement_speed', 'key': 'mv', 'equation': '30+5*floor(@{AGI}/2)'},
            {'attr': 'ac', 'key': 'ac', 'equation': '10+@{TGH}'},
            {'attr': 'evasion', 'key': 'evasion', 'equation': '10+@{REF}'},
            {'attr': 'evasion', 'key': 'ev', 'equation': '10+@{REF}'},
            {'attr': 'magic_resist', 'key': 'magic resist', 'equation': '10+@{RES}'},
            {'attr': 'magic_resist', 'key': 'mr', 'equation': '10+@{RES}'},
            {'attr': 'condition_resist', 'key': 'condition resist', 'equation': '10+@{FRT}'},
            {'attr': 'condition_resist', 'key': 'cr', 'equation': '10+@{FRT}'},
            {'attr': 'melee_damage', 'key': 'melee damage', 'equation': '@{STR}'},
            {'attr': 'ranged_fine_damage', 'key': 'ranged fine damage', 'equation': '@{DEX}'},
            {'attr': 'magic_damage', 'key': 'magic damage', 'equation': '@{ATN}'},
            {'attr': 'critical_hit_chance', 'key': 'critical hit chance', 'equation': '10+@{PRE}'},
            {'attr': 'commands', 'key': 'commands', 'equation': 'floor((@{APL}+10)/10)+1'},
            {'attr': 'num_languages', 'key': 'languages', 'equation': 'floor((@{INT}+10)/3)+1'},
            {'attr': 'item_efficiency', 'key': 'item efficiency', 'equation': '(@{WIS}+10)*5'},
            {'attr': 'buff_limit', 'key': 'buff limit', 'equation': 'floor((@{COM}+10)/2)'},
            {'attr': 'concentration_limit', 'key': 'concentration limit', 'equation': 'floor((@{FCS}+10)/2)'},

            // Miscellaneous stats
            {'attr': 'initiative_bonus', 'key': 'initiative', 'equation': '0'},
            {'attr': 'concentration_bonus', 'key': 'concentration', 'equation': '0'},
            {'attr': 'buff_effectiveness', 'key': 'buff effectiveness', 'equation': '0'},
            {'attr': 'enchant_effectiveness', 'key': 'enchant effectiveness', 'equation': '0'},
            {'attr': 'combo_chance', 'key': 'combo chance', 'equation': '0'},
            {'attr': 'crit_damage_mod', 'key': 'crit damage mod', 'equation': '0'},
            {'attr': 'lethality', 'key': 'lethality', 'equation': '0'},
            {'attr': 'minion_damage', 'key': 'minion damage', 'equation': '0'},
            {'attr': 'minion_lethality', 'key': 'minion lethality', 'equation': '0'},
            {'attr': 'lifesteal', 'key': 'lifesteal', 'equation': '0'},

            // Damage multipliers all use the "multiplier" keyword, so we don't actually look for the keys here, we
            // check for the "multiplier" keyword separately. These entries are still included here, though, so that
            // we update the attrs.
            {'attr': 'all_multiplier', 'key': 'all_multiplier', 'equation': '0'},
            {'attr': 'all_magic_multiplier', 'key': 'all_magic_multiplier', 'equation': '0'},
            {'attr': 'physical_multiplier', 'key': 'physical_multiplier', 'equation': '0'},
            {'attr': 'psychic_multiplier', 'key': 'psychic_multiplier', 'equation': '0'},
            {'attr': 'healing_multiplier', 'key': 'healing_multiplier', 'equation': '0'},
            {'attr': 'fire_multiplier', 'key': 'fire_multiplier', 'equation': '0'},
            {'attr': 'water_multiplier', 'key': 'water_multiplier', 'equation': '0'},
            {'attr': 'earth_multiplier', 'key': 'earth_multiplier', 'equation': '0'},
            {'attr': 'air_multiplier', 'key': 'air_multiplier', 'equation': '0'},
            {'attr': 'ice_multiplier', 'key': 'ice_multiplier', 'equation': '0'},
            {'attr': 'lightning_multiplier', 'key': 'lightning_multiplier', 'equation': '0'},
            {'attr': 'light_multiplier', 'key': 'light_multiplier', 'equation': '0'},
            {'attr': 'dark_multiplier', 'key': 'dark_multiplier', 'equation': '0'},

            // Penetration stats
            {'attr': 'accuracy', 'key': 'accuracy', 'equation': '0'},
            {'attr': 'ac_pen', 'key': 'ac pen', 'equation': '0'},
            {'attr': 'psychic_pen', 'key': 'psychic pen', 'equation': '0'},
            {'attr': 'general_magic_pen', 'key': 'general magic pen', 'equation': '0'},
            {'attr': 'fire_magic_pen', 'key': 'fire magic pen', 'equation': '0'},
            {'attr': 'water_magic_pen', 'key': 'water magic pen', 'equation': '0'},
            {'attr': 'earth_magic_pen', 'key': 'earth magic pen', 'equation': '0'},
            {'attr': 'air_magic_pen', 'key': 'air magic pen', 'equation': '0'},
            {'attr': 'ice_magic_pen', 'key': 'ice magic pen', 'equation': '0'},
            {'attr': 'lightning_magic_pen', 'key': 'lightning magic pen', 'equation': '0'},
            {'attr': 'light_magic_pen', 'key': 'light magic pen', 'equation': '0'},
            {'attr': 'dark_magic_pen', 'key': 'dark magic pen', 'equation': '0'},

            // Damage reduction stats (abbreviated)
            {'attr': 'gdr', 'key': 'gdr', 'equation': '0'},
            {'attr': 'fire_mr', 'key': 'fire mr', 'equation': '0'},
            {'attr': 'water_mr', 'key': 'water mr', 'equation': '0'},
            {'attr': 'earth_mr', 'key': 'earth mr', 'equation': '0'},
            {'attr': 'air_mr', 'key': 'air mr', 'equation': '0'},
            {'attr': 'ice_mr', 'key': 'ice mr', 'equation': '0'},
            {'attr': 'lightning_mr', 'key': 'lightning mr', 'equation': '0'},
            {'attr': 'light_mr', 'key': 'light mr', 'equation': '0'},
            {'attr': 'dark_mr', 'key': 'dark mr', 'equation': '0'},
            // Damage reduction stats (full name)
            {'attr': 'gdr', 'key': 'general damage reduction', 'equation': '0'},
            {'attr': 'fire_mr', 'key': 'fire magic resist', 'equation': '0'},
            {'attr': 'water_mr', 'key': 'water magic resist', 'equation': '0'},
            {'attr': 'earth_mr', 'key': 'earth magic resist', 'equation': '0'},
            {'attr': 'air_mr', 'key': 'air magic resist', 'equation': '0'},
            {'attr': 'ice_mr', 'key': 'ice magic resist', 'equation': '0'},
            {'attr': 'lightning_mr', 'key': 'lightning magic resist', 'equation': '0'},
            {'attr': 'light_mr', 'key': 'light magic resist', 'equation': '0'},
            {'attr': 'dark_mr', 'key': 'dark magic resist', 'equation': '0'},

            // Specific condition resist stats (abbreviated)
            {'attr': 'bleeding_cr', 'key': 'bleeding cr', 'equation': '0'},
            {'attr': 'blinded_cr', 'key': 'blinded cr', 'equation': '0'},
            {'attr': 'burned_cr', 'key': 'burned cr', 'equation': '0'},
            {'attr': 'charmed_cr', 'key': 'charmed cr', 'equation': '0'},
            {'attr': 'confused_cr', 'key': 'confused cr', 'equation': '0'},
            {'attr': 'crippled_cr', 'key': 'crippled cr', 'equation': '0'},
            {'attr': 'cursed_cr', 'key': 'cursed cr', 'equation': '0'},
            {'attr': 'decreased_stats_cr', 'key': 'decreased stats cr', 'equation': '0'},
            {'attr': 'fear_cr', 'key': 'fear cr', 'equation': '0'},
            {'attr': 'frozen_cr', 'key': 'frozen cr', 'equation': '0'},
            {'attr': 'helpless_cr', 'key': 'helpless cr', 'equation': '0'},
            {'attr': 'immobilized_cr', 'key': 'immobilized cr', 'equation': '0'},
            {'attr': 'knocked_down_prone_cr', 'key': 'knocked down prone cr', 'equation': '0'},
            {'attr': 'knocked_up_airborne_cr', 'key': 'knocked up airborne cr', 'equation': '0'},
            {'attr': 'paralyzed_cr', 'key': 'paralyzed cr', 'equation': '0'},
            {'attr': 'petrified_cr', 'key': 'petrified cr', 'equation': '0'},
            {'attr': 'poisoned_cr', 'key': 'poisoned cr', 'equation': '0'},
            {'attr': 'silenced_cr', 'key': 'silenced cr', 'equation': '0'},
            {'attr': 'sleeping_cr', 'key': 'sleeping cr', 'equation': '0'},
            {'attr': 'slowed_cr', 'key': 'slowed cr', 'equation': '0'},
            {'attr': 'stunned_cr', 'key': 'stunned cr', 'equation': '0'},
            {'attr': 'taunted_cr', 'key': 'taunted cr', 'equation': '0'},
            {'attr': 'weakened_cr', 'key': 'weakened cr', 'equation': '0'},
            // Specific condition resist stats (full name)
            {'attr': 'bleeding_cr', 'key': 'bleeding condition resist', 'equation': '0'},
            {'attr': 'blinded_cr', 'key': 'blinded condition resist', 'equation': '0'},
            {'attr': 'burned_cr', 'key': 'burned condition resist', 'equation': '0'},
            {'attr': 'charmed_cr', 'key': 'charmed condition resist', 'equation': '0'},
            {'attr': 'confused_cr', 'key': 'confused condition resist', 'equation': '0'},
            {'attr': 'crippled_cr', 'key': 'crippled condition resist', 'equation': '0'},
            {'attr': 'cursed_cr', 'key': 'cursed condition resist', 'equation': '0'},
            {'attr': 'decreased_stats_cr', 'key': 'decreased stats condition resist', 'equation': '0'},
            {'attr': 'fear_cr', 'key': 'fear condition resist', 'equation': '0'},
            {'attr': 'frozen_cr', 'key': 'frozen condition resist', 'equation': '0'},
            {'attr': 'helpless_cr', 'key': 'helpless condition resist', 'equation': '0'},
            {'attr': 'immobilized_cr', 'key': 'immobilized condition resist', 'equation': '0'},
            {'attr': 'knocked_down_prone_cr', 'key': 'knocked down prone condition resist', 'equation': '0'},
            {'attr': 'knocked_up_airborne_cr', 'key': 'knocked up airborne condition resist', 'equation': '0'},
            {'attr': 'paralyzed_cr', 'key': 'paralyzed condition resist', 'equation': '0'},
            {'attr': 'petrified_cr', 'key': 'petrified condition resist', 'equation': '0'},
            {'attr': 'poisoned_cr', 'key': 'poisoned condition resist', 'equation': '0'},
            {'attr': 'silenced_cr', 'key': 'silenced condition resist', 'equation': '0'},
            {'attr': 'sleeping_cr', 'key': 'sleeping condition resist', 'equation': '0'},
            {'attr': 'slowed_cr', 'key': 'slowed condition resist', 'equation': '0'},
            {'attr': 'stunned_cr', 'key': 'stunned condition resist', 'equation': '0'},
            {'attr': 'taunted_cr', 'key': 'taunted condition resist', 'equation': '0'},
            {'attr': 'weakened_cr', 'key': 'weakened condition resist', 'equation': '0'},
        ];

        String.prototype.format = function() {
            let a = this;
            for (let i = 0; i < arguments.length; i++) {
                a = a.replace('%s', arguments[i]);
            }
            return a
        };

        function trim_percent(string) {
            string = string.trim();
            if (string.endsWith('%')) {
                return string.substring(0, string.length - 1);
            } else {
                return string;
            }
        }

        function organize_items(items) {
            const revised = [];

            for (let i = 0; i < item_attrs.length; i++) {
                if (!(item_attrs[i] in items)) {
                    continue;
                }

                let item = items[item_attrs[i]];
                if (item === null || item === '') {
                    continue;
                }

                revised.push(item);
            }

            return revised;
        }

        function organize_skills(skills, lowercase = true) {
            const pass_1 = {};

            let skill_ids = Object.keys(skills);
            for (let i = 0; i < skill_ids.length; i++) {
                const skill_id = skill_ids[i];
                const value = skills[skill_id];

                const pieces = skill_id.split('_');
                const game_id = pieces[2];
                const attribute = pieces[4];

                if (!(game_id in pass_1)) {
                    pass_1[game_id] = {};
                }

                pass_1[game_id][attribute] = value;
            }

            const pass_2 = [];
            skill_ids = Object.keys(pass_1);
            for (let i = 0; i < skill_ids.length; i++) {
                const skill_id = skill_ids[i];
                const values = pass_1[skill_id];

                const revised = {'id': skill_id};
                if (!('name' in values) || !('points' in values)) {
                    continue;
                }

                revised['name'] = values['name'];
                if (lowercase) {
                    revised['name'] = revised['name'].toLowerCase();
                }
                revised['points'] = values['points'];
                pass_2.push(revised);
            }

            return pass_2;
        }

        function do_update(items, skills) {
            // Build maps of stat and skill bonuses from items
            const stat_bonuses = {};
            const skill_bonuses = {};

            for (let i = 0; i < items.length; i++) {
                const item = items[i];

                const affixes = item.split(';');
                for (let j = 0; j < affixes.length; j++) {
                    const affix = affixes[j].trim().toLowerCase().replace(/[()]/g, '');
                    const affix_pieces = affix.split(':');

                    // Stat (maybe)
                    if (affix_pieces.length === 2) {
                        for (let k = 0; k < stat_keywords.length; k++) {
                            const stat_info = stat_keywords[k];
                            const stat_attr = stat_info['attr'];
                            const stat_key = stat_info['key'];

                            // Stat (definitely)
                            if (affix_pieces[0] === stat_key) {
                                let potential_bonus = affix_pieces[1].trim().split(' ')[0];
                                potential_bonus = trim_percent(potential_bonus);
                                potential_bonus = parseInt(potential_bonus, 10);
                                if (Number.isNaN(potential_bonus)) {
                                    break;
                                }

                                if (!(stat_attr in stat_bonuses)) {
                                    stat_bonuses[stat_attr] = 0;
                                }

                                stat_bonuses[stat_attr] += potential_bonus;
                                continue;
                            }
                        }

                        if (affix_pieces[0] === 'multiplier') {
                            let potential_bonus = affix_pieces[1].trim().split(' ')[0];
                            potential_bonus = trim_percent(potential_bonus);
                            potential_bonus = parseInt(potential_bonus, 10);
                            if (Number.isNaN(potential_bonus)) {
                                continue;
                            }

                            let potential_type = affix_pieces[1].trim().split(' ')[1];
                            if (!damage_multiplier_types.includes(potential_type)) {
                                continue;
                            }

                            const stat_attr = potential_type + '_multiplier';
                            if (!(stat_attr in stat_bonuses)) {
                                stat_bonuses[stat_attr] = 0;
                            }

                            stat_bonuses[stat_attr] += potential_bonus;
                            continue;
                        }
                    }

                    // Skill
                    if (affix_pieces.length === 3) {
                        const potential_bonus = parseInt(affix_pieces[2].trim(), 10);
                        if (Number.isNaN(potential_bonus)) {
                            continue;
                        }

                        const potential_skill = affix_pieces.slice(0, 2).join(':').trim();
                        if (potential_skill in skill_to_attribute_map) {
                            if (!(potential_skill in skill_bonuses)) {
                                skill_bonuses[potential_skill] = 0;
                            }

                            skill_bonuses[potential_skill] += potential_bonus;
                        }
                    }
                }
            }

            const attrs_to_update = {};

            // Update stats
            for (let i = 0; i < stat_keywords.length; i++) {
                const stat_info = stat_keywords[i];
                const stat_attr = stat_info['attr'];
                const stat_key = stat_info['key'];
                let stat_equation = stat_info['equation'];

                if (stat_attr in stat_bonuses) {
                    stat_equation = '%s+%s'.format(stat_equation, stat_bonuses[stat_attr]);
                }

                attrs_to_update['hidden_' + stat_attr] = stat_equation;
            }

            attrs_to_update['hidden_overview_health'] = attrs_to_update['hidden_health'];
            attrs_to_update['hidden_overview_stamina'] = attrs_to_update['hidden_stamina'];
            attrs_to_update['hidden_overview_mana'] = attrs_to_update['hidden_mana'];
            attrs_to_update['hidden_overview_speed'] = attrs_to_update['hidden_movement_speed'];

            // Update skills
            for (let i = 0; i < skills.length; i++) {
                const skill_id = skills[i]['id'];

                const skill_name = skills[i]['name'];
                if (!(skill_name in skill_to_attribute_map)) {
                    console.log('error, unknown skill ' + skill_name);
                    continue;
                }
                const attr = skill_to_attribute_map[skill_name];

                let skill_points = parseInt(skills[i]['points'], 10);
                if (Number.isNaN(skill_points)) {
                    continue;
                }

                skill_points = Math.min(skill_points, ranks.length - 1);
                skill_points = Math.max(0, skill_points);
                const bonus = 5 * skill_points;
                let bonus_string = '%s+@{%s}'.format(bonus.toString(), attr);

                if (skill_name in skill_bonuses) {
                    bonus_string = '%s+%s'.format(bonus_string, skill_bonuses[skill_name]);
                }

                const attr_name = 'repeating_skills_%s_hidden_bonus'.format(skill_id);
                attrs_to_update[attr_name] = bonus_string;
            }

            setAttrs(attrs_to_update);
        }

        function recursive_update(skills, index, handler) {
            if (index === skills.length) {
                handler();
                return;
            }

            console.log('Creating row for skill ' + skills[index]['name']);
            const new_attrs = {};
            const skill_id = generateRowID();
            new_attrs['repeating_skills_' + skill_id + '_skill_name'] = skills[index]['name'];
            new_attrs['repeating_skills_' + skill_id + '_skill_points'] = skills[index]['points'];
            setAttrs(new_attrs, null, function() {
                recursive_update(skills, index + 1, handler);
            });
        }

        function handle_item_change(event) {
            getAttrs(item_attrs, function(items) {
                getSectionIDs('repeating_skills', function(skill_ids) {
                    const specific_skill_ids = [];
                    for(let i = 0; i < skill_ids.length; i++) {
                        const skill_id = skill_ids[i];
                        specific_skill_ids.push('repeating_skills_%s_skill_name'.format(skill_id));
                        specific_skill_ids.push('repeating_skills_%s_skill_points'.format(skill_id));
                    }

                    getAttrs(specific_skill_ids, function(skills) {
                        skills = organize_skills(skills);
                        items = organize_items(items);
                        do_update(items, skills);
                    });
                });
            });
        }

        // React to any item slot changing
        //
        for (let i = 0; i < item_attrs.length; i++) {
            on('change:%s'.format(item_attrs[i]), handle_item_change);
        }

        // React to the button to alphabetize all skills. We do this by fetching all skills, deleting all rows in
        // the repeating section, and then recreating the rows in alphabetical order.
        //
        on('clicked:sort_skills', function() {
            getSectionIDs('repeating_skills', function(skill_ids) {
                const specific_skill_ids = [];
                for(let i = 0; i < skill_ids.length; i++) {
                    const skill_id = skill_ids[i];
                    specific_skill_ids.push('repeating_skills_%s_skill_name'.format(skill_id));
                    specific_skill_ids.push('repeating_skills_%s_skill_points'.format(skill_id));
                }

                getAttrs(specific_skill_ids, function(skills) {
                    skills = organize_skills(skills, /*lowercase=*/false);

                    // Delete all existing rows
                    for (let i = 0; i < skills.length; i++) {
                        const skill_id = skills[i]['id'];
                        removeRepeatingRow('repeating_skills_' + skill_id);
                    }

                    skills.sort(function(a, b) {
                        if (a.name < b.name) {
                            return -1;
                        } else if (a.name > b.name) {
                            return 1;
                        }
                        return 0;
                    });

                    // Recreate all rows in alphabetical order. setAttrs is asynchronous, so we do some recursive fun
                    // here to ensure that we're only updating one row at a time. There were some issues with rows
                    // disappearing if we tried to update all rows simultaneously.
                    //
                    recursive_update(skills, /*index=*/0, handle_item_change);
                });
            });
        });
    </script>


    <!-- Updates class investment table as classes change -->
    <script type="text/worker">
        String.prototype.format = function() {
            let a = this;
            for (let i = 0; i < arguments.length; i++) {
                a = a.replace('%s', arguments[i]);
            }
            return a
        };

        // We're given a map of full attributes from repeating rows -> attribute values
        function organize_classes(map) {
            // Turn it into a map of row id -> {'name': name, 'ap': ap}
            const pass_1 = {};
            const attr_ids = Object.keys(map);
            for (let i = 0; i < attr_ids.length; i++) {
                const full_attr_id = attr_ids[i];
                const value = map[full_attr_id];
                const attr_id = full_attr_id.split('_')[2];

                if (!(attr_id in pass_1)) {
                    pass_1[attr_id] = {};
                }

                if (full_attr_id.includes('name')) {
                    pass_1[attr_id]['name'] = value;
                } else if (full_attr_id.includes('tier')) {
                    pass_1[attr_id]['ap'] = value;
                }
            }

            // Turn pass_1 into a map of class names to total AP
            const pass_2 = {};
            const ids = Object.keys(pass_1);
            for (let i = 0; i < ids.length; i++) {
                const dict = pass_1[ids[i]];
                if (!('name' in dict) || !('ap' in dict)) {
                    continue;
                }


                const val = parseInt(dict['ap'], 10);
                if (Number.isNaN(val)) {
                    continue;
                }

                const name = dict['name'];
                if (!(name in pass_2)) {
                    pass_2[name] = 0;
                }

                pass_2[name] += val;
            }

            // Turn pass_2 into a list of [name, ap] entries
            const pass_3 = [];
            const class_names = Object.keys(pass_2);
            for (let i = 0; i < class_names.length; i++) {
                const class_name = class_names[i];
                const ap = pass_2[class_name];
                pass_3.push([class_name, ap]);
            }

            return pass_3;
        }

        function recursive_update(classes, index) {
            if (index === classes.length) {
                return;
            }

            console.log('Creating row for class investment ' + classes[index][0]);
            const new_attrs = {};
            const class_investment_id = generateRowID();
            new_attrs['repeating_investment_' + class_investment_id + '_hidden_invest_name'] = classes[index][0];
            new_attrs['repeating_investment_' + class_investment_id + '_hidden_invest_ap'] = classes[index][1];
            setAttrs(new_attrs, null, function() {
                recursive_update(classes, index + 1);
            });
        }

        function update_class_investment() {
            getSectionIDs('repeating_abilities', function(ids) {
                const class_attrs = [];
                for (let i = 0; i < ids.length; i++) {
                    class_attrs.push('repeating_abilities_%s_class_name'.format(ids[i]));
                    class_attrs.push('repeating_abilities_%s_ability_tier'.format(ids[i]));
                }

                getAttrs(class_attrs, function(values) {
                    const class_investment = organize_classes(values);

                    // Sort class AP by name alphabetically
                    class_investment.sort(function(a, b) {
                        if (a[0] < b[0]) {
                            return -1;
                        } else if (a.name > b.name) {
                            return 1;
                        }
                        return 0;
                    });

                    // Delete all existing rows and recreate all rows in alphabetical order. setAttrs is asynchronous,
                    // so we do some recursive fun here to ensure that we're only updating one row at a time.
                    getSectionIDs('repeating_investment', function(investment_ids) {
                        for (let i = 0; i < investment_ids.length; i++) {
                            removeRepeatingRow('repeating_investment_' + investment_ids[i]);
                        }

                        recursive_update(class_investment, /*index=*/0);
                    });
                });
            });
        }

        on('change:repeating_abilities:class_name', update_class_investment);
        on('change:repeating_abilities:ability_tier', update_class_investment);

    </script>


    <!-- Updates overall level as attributes, skills, and abilities change -->
    <script type="text/worker">

        const base_equation = '200+@{VIT}+@{END}+@{SPT}+@{RCV}+@{PER}+@{SAN}+@{AGI}+@{TGH}+@{REF}+@{RES}+@{FRT}+@{STR}+@{DEX}+@{ATN}+@{PRE}+@{APL}+@{INT}+@{WIS}+@{COM}+@{FCS}';

        String.prototype.format = function() {
            let a = this;
            for (let i = 0; i < arguments.length; i++) {
                a = a.replace('%s', arguments[i]);
            }
            return a
        };


        function append_ability_points(partial_level_equation) {
            getSectionIDs("repeating_abilities", function(ids) {
                const ability_point_attrs = [];
                for (let i = 0; i < ids.length; i++) {
                    const ability_point_attr = 'repeating_abilities_%s_ability_tier'.format(ids[i]);
                    ability_point_attrs.push(ability_point_attr);
                }

                getAttrs(ability_point_attrs, function(values) {
                    var ability_points = 0;
                    for (let i = 0; i < ability_point_attrs.length; i++) {
                        ability_points += parseInt(values[ability_point_attrs[i]]);
                    }

                    const level_equation = '%s+%s'.format(partial_level_equation, ability_points.toString(10));
                    setAttrs({
                        hidden_level: level_equation,
                    });
                });
            });
        }


        function append_skill_points() {
            getSectionIDs("repeating_skills", function(ids) {
                const skill_point_attrs = [];
                for (let i = 0; i < ids.length; i++) {
                    const skill_point_attr = 'repeating_skills_%s_skill_points'.format(ids[i]);
                    skill_point_attrs.push(skill_point_attr);
                }

                getAttrs(skill_point_attrs, function(values) {
                    var skill_points = 0;
                    for (let i = 0; i < skill_point_attrs.length; i++) {
                        skill_points += parseInt(values[skill_point_attrs[i]]);
                    }

                    const partial_level_equation = '%s+%s'.format(base_equation, skill_points.toString(10));
                    append_ability_points(partial_level_equation);
                });
            });
        }


        function handle_event(event) {
            append_skill_points();
        }


        on("change:repeating_skills:skill_points", handle_event);
        on("change:repeating_abilities:ability_tier", handle_event);

    </script>

</div>


<rolltemplate class="sheet-rolltemplate-5eDefault">
    <div class="sheet-rt-card">
        <div class="sheet-rt-header{{#weapon}} sheet-weapon{{/weapon}}{{#spell}}  sheet-spell{{/spell}}{{#ability}} sheet-ability{{/ability}}{{#save}} sheet-save{{/save}}{{#deathsave}} sheet-deathsave{{/deathsave}}">
            <div class="sheet-rt-title">{{title}}</div>
            {{#subheader}}
            <div class="sheet-rt-subheader">{{subheader}}{{#subheaderright}} &bullet; {{subheaderright}}{{/subheaderright}}</div>
            {{/subheader}}

            {{#subheader2}}
            <div class="sheet-rt-subheader">{{subheader2}}{{#subheaderright2}} &bullet; {{subheaderright2}}{{/subheaderright2}}</div>
            {{/subheader2}}
        </div>

        {{#emote}}
        <p class="sheet-rt-emote">{{character_name}} {{emote}}</p>
        {{/emote}}

        <div class="sheet-main-content">
            <!--Weapon based attacks-->
            {{#attack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{attack}}{{#attackadv}} | {{attackadv}}{{/attackadv}} vs AC</div>
            </div>
            {{/attack}}

            {{#damage}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{damage}}</div>
            </div>
            {{/damage}}

            {{#rollWasCrit() attack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{critdamage}}</div>
            </div>
            {{/rollWasCrit() attack}}

            {{#rollWasCrit() attackadv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{critdamage}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() attackadv}}

            <!--Spellcasting-->
            {{#spellshowinfoblock}}
            <div class="sheet-row sheet-padb">
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-right-dotted"><span class="sheet-rt-key">Class</span>
                    <br/><span class="sheet-rt-value">{{spellgainedfrom}}</span></div>
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-left-dotted"><span class="sheet-rt-key">Comp.</span>
                    <br/><span class="sheet-rt-value">{{spellcomponents}}</span></div>
                <div class="sheet-col-1 sheet-border-top-dotted"></div>
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-right-dotted"><span class="sheet-rt-key">Cast Time</span>
                    <br/><span class="sheet-rt-value">{{spellcasttime}}</span></div>
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-left-dotted"><span class="sheet-rt-key">Duration</span>
                    <br/><span class="sheet-rt-value">{{spellduration}}</span></div>
                <div class="sheet-col-1 sheet-border-top-dotted"></div>
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-right-dotted"><span class="sheet-rt-key">Target/AoE</span>
                    <br/><span class="sheet-rt-value">{{spelltarget}}</span></div>
                <div class="sheet-col-1-2 sheet-padl sheet-padr sheet-center sheet-border-left-dotted"><span class="sheet-rt-key">Range</span>
                    <br/><span class="sheet-rt-value">{{spellrange}}</span></div>
            </div>
            {{/spellshowinfoblock}}

            {{#spellshowattack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spellattack}}{{#spellshowattackadv}} | {{spellattackadv}}{{/spellshowattackadv}} vs AC</div>
            </div>
            {{/spellshowattack}}

            {{#spellshowsavethrow}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Save</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">DC {{spellsavedc}} {{spellsavestat}}</div>
            </div>
            {{/spellshowsavethrow}}

            {{#spellshowhealing}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Healing</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spellhealing}} HP healed</div>
            </div>
            {{/spellshowhealing}}

            {{#spellshowdamage}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spelldamage}}</div>
            </div>
            {{/spellshowdamage}}

            {{#spellcancrit}}
            {{#spellshowattack}}
            {{#rollWasCrit() spellattack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spellcritdamage}}</div>
            </div>
            {{/rollWasCrit() spellattack}}

            {{#rollWasCrit() spellattackadv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spellcritdamage}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() spellattackadv}}
            {{/spellshowattack}}
            {{/spellcancrit}}

            {{#spellshoweffects}}
            <div class="sheet-row">
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-key">Effect</div>
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-value">{{spelleffect}}</div>
            </div>
            {{/spellshoweffects}}

            {{#spellshowsavethrow}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Save success</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{spellsavesuccess}}</div>
            </div>
            {{/spellshowsavethrow}}

            {{#spellshowdesc}}
            <div class="sheet-row">
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-key">Spell Description</div>
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-value">{{spelldescription}}</div>
            </div>
            {{/spellshowdesc}}

            {{#spellshowhigherlvl}}
            <div class="sheet-row">
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-key">At Higher Levels</div>
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-value">{{spellhigherlevel}}</div>
            </div>
            {{/spellshowhigherlvl}}

            <!--NPC-->
            {{#npccorestats}}
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-key">Stat</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-key">Score</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-key">Mod</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">STR</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_strength}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_strength_mod}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">DEX</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_dexterity}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_dexterity_mod}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">CON</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_constitution}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_constitution_mod}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">INT</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_intelligence}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_intelligence_mod}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">WIS</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_wisdom}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_wisdom_mod}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">CHA</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_charisma}}</div>
                <div class="sheet-col-1-3 sheet-padl sheet-padr sheet-rt-value">{{npc_charisma_mod}}</div>
            </div>
            {{/npccorestats}}

            {{#npctraits}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Dmg Resistance</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_damage_resistance}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Dmg Vuln.</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_damage_vulnerability}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Dmg Immunity</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_damage_immunity}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Condition Immunity</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_condition_immunity}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Other Traits</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_traits}}</div>
            </div>
            {{/npctraits}}

            {{#npcaction}}
            {{#npc_showmultiattack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Multi Attack</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_multiattack}}</div>
            </div>
            {{/npc_showmultiattack}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Desc.</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_action_description}}</div>
            </div>
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Effect</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{npc_action_effect}}</div>
            </div>
            {{/npcaction}}

            <!--Generic section-->
            {{#freetext}}
            <div class="sheet-row">
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-key-wide">{{freetextname}}</div>
                <div class="sheet-col-1 sheet-padl sheet-padr sheet-rt-value">{{freetext}}</div>
            </div>
            {{/freetext}}

            {{#roll}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">{{rollname}}</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll}}{{#rolladv}} | {{rolladv}}{{/rolladv}}</div>
            </div>
            {{/roll}}

            <!-- START roll option templates -->
            <!--Simple roll (such as save/skill check or weapon attack)-->
            {{#simple}}
            {{#rollhasadv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Roll type</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">With advantage</div>
            </div>
            {{/rollhasadv}}

            {{#rollhasdisadv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Roll type</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">With disadvantage</div>
            </div>
            {{/rollhasdisadv}}

            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">{{rollname}}</div>
                {{#noadvroll}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}}</div>
                {{/noadvroll}} {{#showadvroll}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}} | {{roll2}}</div>
                {{/showadvroll}} {{#rollhasadv}} {{#rollTotal() roll1 roll2}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}} | <span class="sheet-ignored-roll">{{roll2}}</span></div>{{/rollTotal() roll1 roll2}} {{#rollGreater() roll1 roll2}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}} | <span class="sheet-ignored-roll">{{roll2}}</span></div>{{/rollGreater() roll1 roll2}} {{#rollGreater() roll2 roll1}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value"><span class="sheet-ignored-roll">{{roll1}}</span> | {{roll2}}</div>{{/rollGreater() roll2 roll1}} {{/rollhasadv}} {{#rollhasdisadv}} {{#rollTotal() roll1 roll2}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}} | <span class="sheet-ignored-roll">{{roll2}}</span></div>{{/rollTotal() roll1 roll2}} {{#rollLess() roll1 roll2}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{roll1}} | <span class="sheet-ignored-roll">{{roll2}}</span></div>{{/rollLess() roll1 roll2}} {{#rollLess() roll2 roll1}}
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value"><span class="sheet-ignored-roll">{{roll1}}</span> | {{roll2}}</div>{{/rollLess() roll2 roll1}} {{/rollhasdisadv}}
            </div>

            {{#weapondamage}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weapondamage}}</div>
            </div>
            {{/weapondamage}}

            {{#weapon}}
            {{#noadvroll}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}
            {{/noadvroll}}

            {{#showadvroll}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}

            {{#rollWasCrit() roll2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll2}}
            {{/showadvroll}}

            {{#rollhasadv}}
            {{#rollGreater() roll1 roll2}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}
            {{/rollGreater() roll1 roll2}}

            {{#rollGreater() roll2 roll1}}
            {{#rollWasCrit() roll2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll2}}
            {{/rollGreater() roll2 roll1}}

            {{#rollTotal() roll1 roll2}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}
            {{/rollTotal() roll1 roll2}}
            {{/rollhasadv}}

            {{#rollhasdisadv}}
            {{#rollLess() roll1 roll2}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}
            {{/rollLess() roll1 roll2}}

            {{#rollLess() roll2 roll1}}
            {{#rollWasCrit() roll2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll2}}
            {{/rollLess() roll2 roll1}}

            {{#rollTotal() roll1 roll2}}
            {{#rollWasCrit() roll1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{weaponcritdamage}}</div>
            </div>
            {{/rollWasCrit() roll1}}
            {{/rollTotal() roll1 roll2}}
            {{/rollhasdisadv}}
            {{/weapon}}

            {{#math}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Math</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value sheet-no-roll-highlight">{{math}}</div>
            </div>
            {{/math}}
            {{/simple}}

            <!-- END roll option templates -->
            <!-- Class action additions -->
            {{#showclassactions}} {{#allprops() showclassactions character_name save title subheader subheaderright subheader2 subheaderright2 rollname roll rolladv emote deathsave weapon attack attackadv damage critdamage spell spellshowinfoblock spellshowdesc spelldescription spellshowhigherlvl spellhigherlevel spellshowattack spellattack spellshowattackadv spellattackadv spellshowsavethrow spellsavedc spellsavestat spellsavesuccess spellshowhealing spellhealing spellshowdamage spelldamage spellcancrit spellcritdamage spellshoweffects spelleffect spellcasttime spellduration spelltarget spellrange spellgainedfrom spellcomponents ability roll1 roll2 simple showadvroll noadvroll rollhasadv rollhasdisadv math weapondamage weaponcritdamage debug}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">{{key}}</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{value}}</div>
            </div>
            {{/allprops() showclassactions character_name save title subheader subheaderright subheader2 subheaderright2 rollname roll rolladv emote deathsave weapon attack attackadv damage critdamage spell spellshowinfoblock spellshowdesc spelldescription spellshowhigherlvl spellhigherlevel spellshowattack spellattack spellshowattackadv spellattackadv spellshowsavethrow spellsavedc spellsavestat spellsavesuccess spellshowhealing spellhealing spellshowdamage spelldamage spellcancrit spellcritdamage spellshoweffects spelleffect spellcasttime spellduration spelltarget spellrange spellgainedfrom spellcomponents ability roll1 roll2 simple showadvroll noadvroll rollhasadv rollhasdisadv math weapondamage weaponcritdamage debug}} {{/showclassactions}}
            <!--Multi attack-->
            {{#multiattack}}
            <!--Attack 1-->
            {{#mattack1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack1</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mattack1}}{{#mattack1adv}} | {{mattack1adv}}{{/mattack1adv}} vs AC</div>
            </div>
            {{/mattack1}} {{#mdamage1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage1</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mdamage1}}</div>
            </div>
            {{/mdamage1}} {{#rollWasCrit() mattack1}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit1</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage1}}</div>
            </div>
            {{/rollWasCrit() mattack1}} {{#rollWasCrit() mattack1adv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit1 (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage1}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() mattack1adv}}
            <!--Attack 2-->
            {{#mattack2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack2</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mattack2}}{{#mattack2adv}} | {{mattack2adv}}{{/mattack2adv}} vs AC</div>
            </div>
            {{/mattack2}} {{#mdamage2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage2</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mdamage2}}</div>
            </div>
            {{/mdamage2}} {{#rollWasCrit() mattack2}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit2</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage2}}</div>
            </div>
            {{/rollWasCrit() mattack2}} {{#rollWasCrit() mattack2adv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit2 (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage2}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() mattack2adv}}
            <!--Attack 3-->
            {{#mattack3}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack3</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mattack3}}{{#mattack3adv}} | {{mattack3adv}}{{/mattack3adv}} vs AC</div>
            </div>
            {{/mattack3}} {{#mdamage3}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage3</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mdamage3}}</div>
            </div>
            {{/mdamage3}} {{#rollWasCrit() mattack3}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit3</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage3}}</div>
            </div>
            {{/rollWasCrit() mattack3}} {{#rollWasCrit() mattack3adv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit3 (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage3}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() mattack3adv}}
            <!--Attack 4-->
            {{#mattack4}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack4</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mattack4}}{{#mattack4adv}} | {{mattack4adv}}{{/mattack4adv}} vs AC</div>
            </div>
            {{/mattack4}} {{#mdamage4}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage4</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mdamage4}}</div>
            </div>
            {{/mdamage4}} {{#rollWasCrit() mattack4}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit4</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage4}}</div>
            </div>
            {{/rollWasCrit() mattack4}} {{#rollWasCrit() mattack4adv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit4 (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage4}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() mattack4adv}}
            <!--Attack 5-->
            {{#mattack5}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Attack5</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mattack5}}{{#mattack5adv}} | {{mattack5adv}}{{/mattack5adv}} vs AC</div>
            </div>
            {{/mattack5}} {{#mdamage5}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Damage5</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mdamage5}}</div>
            </div>
            {{/mdamage5}} {{#rollWasCrit() mattack5}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit5</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage5}}</div>
            </div>
            {{/rollWasCrit() mattack5}} {{#rollWasCrit() mattack5adv}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">Crit5 (adv roll)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{mcritdamage5}} (if attack was made with advantage)</div>
            </div>
            {{/rollWasCrit() mattack5adv}} {{/multiattack}}
            <!--Outputall-->
            {{#outputall}} {{#allprops() outputall title subheader subheaderright subheader2 subheaderright2 emote weapon spell ability save deathsave}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">{{key}}</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{value}}</div>
            </div>
            {{/allprops() outputall title subheader subheaderright subheader2 subheaderright2 emote weapon spell ability save deathsave}} {{/outputall}}
            <!--DEBUG-->
            {{#debug}} {{#allprops()}}
            <div class="sheet-row">
                <div class="sheet-col-5-12 sheet-padl sheet-padr sheet-rt-key">{{key}} (DEBUG)</div>
                <div class="sheet-col-7-12 sheet-padr sheet-rt-value">{{value}}</div>
            </div>
            {{/allprops()}} {{/debug}}
        </div>
    </div>
</rolltemplate>


<!--
Desired example

&{template:Barbs} {{name=Piercing Shot}}
{{physical=[[d100]]}} {{psychic=[[d100]]}} {{fire=[[d100]]}} {{water=[[d100]]}} {{earth=[[d100]]}} {{air=[[d100]]}} {{ice=[[d100]]}} {{lightning=[[d100]]}} {{light=[[d100]]}} {{dark=[[d100]]}} {{healing=[[d100]]}}
{{crit_value=[[40]]}} {{crit_cutoff=[[50]]}}
{{effects="something cool"}}
{{button=[List Effects](!barbs list_effects)}}
-->

<rolltemplate class="sheet-rolltemplate-Barbs">
    <table>
        <caption>{{name}}</caption>

        <!-- Colors for each damage type
          Physical - orange
          Fire - red
          Water - blue
          Earth - purple
          Air - green
          Ice - silver
          Lightning - gold
          Light - white
          Dark - black
          Healing - pink
        -->

        {{#general}}
        <tr style="background:#FFB27F;">
            <td class="template_label">General:</td>
            <td class="template_value">{{general}}</td>
        </tr>
        {{/general}}

        {{#physical}}
        <tr style="background:#FFB27F;">
            <td class="template_label">Physical:</td>
            <td class="template_value">{{physical}}</td>
        </tr>
        {{/physical}}

        {{#psychic}}
        <tr style="background:#C0C0C0;">
            <td class="template_label">Psychic:</td>
            <td class="template_value">{{psychic}}</td>
        </tr>
        {{/psychic}}

        {{#fire}}
        <tr style="background:#FF6868;">
            <td class="template_label">Fire:</td>
            <td class="template_value">{{fire}}</td>
        </tr>
        {{/fire}}

        {{#water}}
        <tr style="background:#5B82EF;">
            <td class="template_label">Water:</td>
            <td class="template_value">{{water}}</td>
        </tr>
        {{/water}}

        {{#earth}}
        <tr style="background:#B58A6E;">
            <td class="template_label">Earth:</td>
            <td class="template_value">{{earth}}</td>
        </tr>
        {{/earth}}

        {{#air}}
        <tr style="background:#BAFFA5;">
            <td class="template_label">Air:</td>
            <td class="template_value">{{air}}</td>
        </tr>
        {{/air}}

        {{#ice}}
        <tr style="background:#A3FFE9;">
            <td class="template_label">Ice:</td>
            <td class="template_value">{{ice}}</td>
        </tr>
        {{/ice}}

        {{#lightning}}
        <tr style="background:#FCF79F;">
            <td class="template_label">Lightning:</td>
            <td class="template_value">{{lightning}}</td>
        </tr>
        {{/lightning}}

        {{#light}}
        <tr style="background:#FFFFFF;">
            <td class="template_label">Light:</td>
            <td class="template_value">{{light}}</td>
        </tr>
        {{/light}}

        {{#dark}}
        <tr style="background:#000000; color:#FFFFFF;">
            <td class="template_label">Dark:</td>
            <td class="template_value">{{dark}}</td>
        </tr>
        {{/dark}}

        {{#healing}}
        <tr style="background:#FF9BFF;">
            <td class="template_label">Healing:</td>
            <td class="template_value">{{healing}}</td>
        </tr>
        {{/healing}}

        {{#total}}
        <tr style="background:#702082; color:#FFFFFF">
            <td class="template_label">Total:</td>
            <td class="template_value">{{total}}</td>
        </tr>
        {{/total}}

        {{#modified_crit}}
        {{#rollLess() crit_value crit_cutoff}}
        <tr style="background:#B20088; color:#FFFFFF">
            <td class="template_label">Crit ({{crit_chance}}%):</td>
            <td class="template_value">{{modified_crit}}</td>
        </tr>
        {{/rollLess() crit_value crit_cutoff}}

        {{#^rollLess() crit_value crit_cutoff}}
        <tr style="background:#B20088; color:#FFFFFF; border: 3px solid #3FB315;">
            <td class="template_label">Crit ({{crit_chance}}%):</td>
            <td class="template_value">{{modified_crit}}</td>
        </tr>
        {{/^rollLess() crit_value crit_cutoff}}
        {{/modified_crit}}

        {{#combo}}
        <tr style="background:#A472E5">
            <td class="template_label">Combo ({{combo_chance}}%):</td>
            <td class="template_value">{{combo}}</td>
        </tr>
        {{/combo}}

        {{#effects}}
        <tr style="background:#FFFFFF; color:#000000;">
            <td colspan="2">
                <b>Effects:</b><br/>
                <ul>
                    {{effects}}
                </ul>
            </td>
        </tr>
        {{/effects}}

        {{#button}}
        <tr style="text-align:center; background:#FFFFFF; color:#000000;">
            <td colspan="2">
                {{button}}
            </td>
        </tr>
        {{/button}}

    </table>
</rolltemplate>
